{
  "version": "1.0",
  "generated_at": "2026-02-04T10:57:52.621717",
  "total_customizations": 255,
  "summary": {
    "total": 255,
    "removals": 72,
    "substitutions": 85,
    "additions": 98,
    "files_affected": 71
  },
  "by_file": {
    "firefox-ios/Account/FxAPushMessageHandler.swift": 1,
    "firefox-ios/Client/Application/AccessibilityIdentifiers.swift": 1,
    "firefox-ios/Client/Coordinators/Browser/BrowserCoordinator.swift": 2,
    "firefox-ios/Client/Coordinators/Launch/LaunchCoordinator.swift": 3,
    "firefox-ios/Client/Coordinators/LaunchView/LaunchScreenViewController.swift": 1,
    "firefox-ios/Client/Coordinators/LaunchView/LaunchScreenViewModel.swift": 1,
    "firefox-ios/Client/Frontend/Browser/BrowserViewController/Views/BrowserViewController.swift": 2,
    "firefox-ios/Client/Frontend/Browser/Tabs/Views/Animation/TabTrayPanelSwipePalette.swift": 2,
    "firefox-ios/Client/Frontend/Browser/Tabs/Views/Animation/TabTrayPanelSwipeTheme.swift": 2,
    "firefox-ios/Client/Frontend/Home/Homepage/HomepageDiffableDataSource.swift": 5,
    "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift": 14,
    "firefox-ios/Client/Frontend/Home/Homepage/Layout/HomepageSectionLayoutProvider.swift": 2,
    "firefox-ios/Client/Frontend/Share/ShareTelemetry.swift": 1,
    "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift": 7,
    "firefox-ios/Client/IntroScreenManager.swift": 1,
    "firefox-ios/Client/TabManagement/Tab.swift": 3,
    "firefox-ios/Client/TabManagement/TabManagerImplementation.swift": 1,
    "firefox-ios/Client/Telemetry/GleanWrapper.swift": 3,
    "firefox-ios/Client/Telemetry/HistoryDeletionUtilityTelemetry.swift": 1,
    "firefox-ios/Client/Telemetry/HomepageTelemetry.swift": 1,
    "firefox-ios/Client/Telemetry/NotificationManagerTelemetry.swift": 2,
    "firefox-ios/Client/Telemetry/PrivateBrowsingTelemetry.swift": 1,
    "firefox-ios/Client/Telemetry/SearchTelemetry.swift": 10,
    "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift": 6,
    "firefox-ios/Client/Telemetry/ShortcutsLibraryTelemetry.swift": 3,
    "firefox-ios/Client/Telemetry/SponsoredTileTelemetry.swift": 1,
    "firefox-ios/Client/Telemetry/TabErrorTelemetryHelper.swift": 2,
    "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift": 7,
    "firefox-ios/Client/Telemetry/TabsTelemetry.swift": 3,
    "firefox-ios/Client/Telemetry/TelemetryContextualIdentifier.swift": 2,
    "firefox-ios/Client/Telemetry/TelemetryWrapper.swift": 11,
    "firefox-ios/Client/Telemetry/ToastTelemetry.swift": 2,
    "firefox-ios/Client/Telemetry/UserTelemetry.swift": 2,
    "firefox-ios/Client/Telemetry/WebviewTelemetry.swift": 3,
    "firefox-ios/Providers/RustSyncManager.swift": 1,
    "firefox-ios/Storage/DefaultSuggestedSites.swift": 4,
    "firefox-ios/Storage/Rust/RustAutofill.swift": 6,
    "firefox-ios/Storage/Rust/RustLogins.swift": 5,
    "firefox-ios/WidgetKit/SearchQuickLinksSmall/SmallQuickLink.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/BrowserCoordinatorTests.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/Launch/LaunchCoordinatorTests.swift": 4,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift": 8,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift": 28,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SceneCoordinatorTests.swift": 3,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SettingsCoordinatorTests.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift": 7,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/DefaultSearchPrefsTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/DependencyInjection/DependencyHelperMock.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/SearchEngines/SearchTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift": 7,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/ContentContainerTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/HomepageViewControllerTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/LegacyHomepageViewControllerTests.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesDimensionTests.swift": 5,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesViewModelTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Helpers/IntroScreenManagerTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Library/Bookmarks/BookmarkPanelViewModelTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Mocks/MockSettingsDelegate.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Mocks/MockTabManager.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/OnboardingTests/NimbusOnboardingFeatureLayerTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/OverlayModeManagerTests.swift": 4,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/ProfileTest.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Settings/AppSettingsTableViewControllerTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Settings/VersionSettingTests.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift": 13,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift": 17,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabToolbarHelperTests.swift": 3,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabTray/TabTrayViewControllerTests.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/ClientTests/Wallpaper/WallpaperSelectorViewModelTests.swift": 1,
    "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentBuilderTests.swift": 2,
    "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentTests.swift": 3
  },
  "customizations": [
    {
      "file": "firefox-ios/Account/FxAPushMessageHandler.swift",
      "line": 11,
      "type": "substitution",
      "comment": "Already declared in RustFirefoxAccounts.swift",
      "firefox_code": [
        "let PendingAccountDisconnectedKey = \"PendingAccountDisconnect\""
      ],
      "ecosia_code": [],
      "context_before": [
        "import enum MozillaAppServices.AccountEvent",
        ""
      ],
      "context_after": [
        "",
        "// TODO: FXIOS-12610 make this code actually threadsafe which will involve the profile"
      ]
    },
    {
      "file": "firefox-ios/Client/Application/AccessibilityIdentifiers.swift",
      "line": 873,
      "type": "addition",
      "comment": "Custom accessibility identifiers",
      "firefox_code": [],
      "ecosia_code": [
        "    struct Ecosia {",
        "        static let logo = \"ecosia-logo\""
      ],
      "context_before": [
        "        static let brightnessSlider = \"ReaderMode.brightnessSlider\"",
        "    }"
      ],
      "context_after": [
        "",
        "        struct TabToolbar {"
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/Browser/BrowserCoordinator.swift",
      "line": 86,
      "type": "addition",
      "comment": "Set referrals and ecosiaAuth so showHomepage can run setupEcosiaAdapter and use Ecosia NTP",
      "firefox_code": [],
      "ecosia_code": [
        "        configureEcosiaServicesIfNeeded()"
      ],
      "context_before": [
        "        browserViewController.navigationHandler = self",
        "        tabManager.addDelegate(self)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/Browser/BrowserCoordinator.swift",
      "line": 149,
      "type": "addition",
      "comment": "Setup Ecosia adapter before first view access so loadView uses EcosiaHomepageDiffableDataSource",
      "firefox_code": [],
      "ecosia_code": [
        "        if self.homepageViewController == nil,",
        "           let auth = browserViewController.ecosiaAuth,",
        "           let referrals = browserViewController.referrals {",
        "            homepageController.setupEcosiaAdapter(",
        "                profile: profile,",
        "                tabManager: browserViewController.tabManager,",
        "                referrals: referrals,",
        "                auth: auth,",
        "                browserViewController: browserViewController",
        "            )"
      ],
      "context_before": [
        "        homepageController.termsOfUseDelegate = self",
        ""
      ],
      "context_after": [
        "        }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/Launch/LaunchCoordinator.swift",
      "line": 26,
      "type": "removal",
      "comment": "Add WelcomeDelegate",
      "firefox_code": [
        "                               OnboardingServiceDelegate {"
      ],
      "ecosia_code": [],
      "context_before": [
        "                               ParentCoordinatorDelegate,",
        "                               OnboardingNavigationDelegate,"
      ],
      "context_after": [
        "                               OnboardingServiceDelegate,",
        "                               WelcomeDelegate {"
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/Launch/LaunchCoordinator.swift",
      "line": 37,
      "type": "addition",
      "comment": "Used when presenting Ecosia Welcome to call didSeeIntroScreen on finish",
      "firefox_code": [],
      "ecosia_code": [
        "    private var introManagerForEcosiaWelcome: IntroScreenManagerProtocol?"
      ],
      "context_before": [
        "    weak var parentCoordinator: LaunchCoordinatorDelegate?",
        "    private var onboardingService: OnboardingService?"
      ],
      "context_after": [
        "",
        "    init(router: Router,"
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/Launch/LaunchCoordinator.swift",
      "line": 61,
      "type": "removal",
      "comment": "Swap Firefox onboarding with Ecosia Welcome",
      "firefox_code": [
        "            if manager.isModernOnboardingEnabled {",
        "                presentModernIntroOnboarding(with: manager, isFullScreen: isFullScreen)",
        "            } else {",
        "                presentIntroOnboarding(with: manager, isFullScreen: isFullScreen)",
        "            }"
      ],
      "ecosia_code": [],
      "context_before": [
        "            }",
        "        case .intro(let manager):"
      ],
      "context_after": [
        "            presentEcosiaWelcome(with: manager, isFullScreen: isFullScreen)",
        "        case .update(let viewModel):"
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/LaunchView/LaunchScreenViewController.swift",
      "line": 10,
      "type": "removal",
      "comment": "Use Ecosia launch screen (EcosiaLaunchScreen.xib) instead of Firefox LaunchScreen.xib",
      "firefox_code": [
        "    private lazy var launchScreen = LaunchScreenView.fromNib()"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "class LaunchScreenViewController: UIViewController, LaunchFinishedLoadingDelegate, FeatureFlaggable {"
      ],
      "context_after": [
        "    private lazy var launchScreen = EcosiaLaunchScreenView.fromNib()",
        "    private weak var coordinator: LaunchFinishedLoadingDelegate?"
      ]
    },
    {
      "file": "firefox-ios/Client/Coordinators/LaunchView/LaunchScreenViewModel.swift",
      "line": 108,
      "type": "removal",
      "comment": "Present Welcome right after launch screen (intro before ToS)",
      "firefox_code": [
        "            if termsOfServiceManager.shouldShowScreen {",
        "                order.append(.termsOfService(manager: termsOfServiceManager))",
        "            }",
        "            order.append(.intro(manager: introScreenManager))"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        if introScreenManager.shouldShowIntroScreen {"
      ],
      "context_after": [
        "            order.append(.intro(manager: introScreenManager))",
        "            if termsOfServiceManager.shouldShowScreen {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Browser/BrowserViewController/Views/BrowserViewController.swift",
      "line": 133,
      "type": "addition",
      "comment": "Authentication manager for handling login/logout flows",
      "firefox_code": [],
      "ecosia_code": [
        "    var ecosiaAuth: EcosiaAuth?"
      ],
      "context_before": [
        "    var updateDisplayedPopoverProperties: (() -> Void)?",
        "    lazy var screenshotHelper = ScreenshotHelper(controller: self)"
      ],
      "context_after": [
        "    // Ecosia: Referrals service for loading screen and homepage adapter",
        "    var referrals: Referrals?"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Browser/BrowserViewController/Views/BrowserViewController.swift",
      "line": 135,
      "type": "addition",
      "comment": "Referrals service for loading screen and homepage adapter",
      "firefox_code": [],
      "ecosia_code": [
        "    var referrals: Referrals?"
      ],
      "context_before": [
        "    // Ecosia: Authentication manager for handling login/logout flows",
        "    var ecosiaAuth: EcosiaAuth?"
      ],
      "context_after": [
        "",
        "    // MARK: Lazy loading UI elements"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Browser/Tabs/Views/Animation/TabTrayPanelSwipePalette.swift",
      "line": 8,
      "type": "removal",
      "comment": "Conform to EcosiaThemeColourPalette so Theme protocol (colors: EcosiaThemeColourPalette) is satisfied",
      "firefox_code": [
        "struct TabTrayPanelSwipePalette: ThemeColourPalette {",
        "    private let base: ThemeColourPalette",
        "    private let partialOverrides: PartialOverrides"
      ],
      "ecosia_code": [],
      "context_before": [
        "import UIKit",
        ""
      ],
      "context_after": [
        "struct TabTrayPanelSwipePalette: EcosiaThemeColourPalette {",
        "    private let base: EcosiaThemeColourPalette"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Browser/Tabs/Views/Animation/TabTrayPanelSwipePalette.swift",
      "line": 161,
      "type": "removal",
      "comment": "Base must be EcosiaThemeColourPalette to forward ecosia",
      "firefox_code": [
        "    init(base: ThemeColourPalette, overrides: PartialOverrides) {"
      ],
      "ecosia_code": [],
      "context_before": [
        "    var gradientOnboardingStop4: UIColor { base.gradientOnboardingStop4 }",
        ""
      ],
      "context_after": [
        "    init(base: EcosiaThemeColourPalette, overrides: PartialOverrides) {",
        "        self.base = base"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Browser/Tabs/Views/Animation/TabTrayPanelSwipeTheme.swift",
      "line": 10,
      "type": "removal",
      "comment": "Theme protocol requires colors: EcosiaThemeColourPalette",
      "firefox_code": [
        "    var colors: ThemeColourPalette"
      ],
      "ecosia_code": [],
      "context_before": [
        "struct TabTrayPanelSwipeTheme: Theme {",
        "    var type: ThemeType"
      ],
      "context_after": [
        "    var colors: EcosiaThemeColourPalette",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Browser/Tabs/Views/Animation/TabTrayPanelSwipeTheme.swift",
      "line": 38,
      "type": "removal",
      "comment": "Palettes are EcosiaThemeColourPalette; KeyPath<ThemeColourPalette, UIColor> still applies (EcosiaThemeColourPalette: ThemeColourPalette)",
      "firefox_code": [
        "    private static func mixColors(",
        "        from: ThemeColourPalette,",
        "        to: ThemeColourPalette,",
        "        progress: CGFloat",
        "    ) -> (_ keyPath: KeyPath<ThemeColourPalette, UIColor>) -> UIColor {"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "    private static func mixColors(",
        "        from: EcosiaThemeColourPalette,"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageDiffableDataSource.swift",
      "line": 12,
      "type": "removal",
      "comment": "Non-final so Ecosia can subclass with EcosiaHomepageDiffableDataSource",
      "firefox_code": [
        "final class HomepageDiffableDataSource:"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "/// Holds the data source configuration for the new homepage as part of the rebuild project"
      ],
      "context_after": [
        "class HomepageDiffableDataSource:",
        "    UICollectionViewDiffableDataSource<HomepageSection, HomepageItem>,"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageDiffableDataSource.swift",
      "line": 21,
      "type": "substitution",
      "comment": "Allow subclass to provide cell types for registration",
      "firefox_code": [
        "/ Cell types to register with the collection view. Subclasses can override to provide a different set."
      ],
      "ecosia_code": [
        "    class var cellTypesToRegister: [ReusableCell.Type] {",
        "        HomeItem.cellTypes"
      ],
      "context_before": [
        "    typealias NumberOfTilesPerRow = Int",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageDiffableDataSource.swift",
      "line": 27,
      "type": "addition",
      "comment": "Required so Ecosia can instantiate EcosiaHomepageDiffableDataSource via metatype",
      "firefox_code": [],
      "ecosia_code": [
        "    required override init(",
        "        collectionView: UICollectionView,",
        "        cellProvider: @escaping UICollectionViewDiffableDataSource<HomeSection, HomeItem>.CellProvider",
        "    ) {",
        "        super.init(collectionView: collectionView, cellProvider: cellProvider)"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageDiffableDataSource.swift",
      "line": 45,
      "type": "addition",
      "comment": "Custom sections for Ecosia-specific homepage content",
      "firefox_code": [],
      "ecosia_code": [
        "        case ecosiaHeader",
        "        case ecosiaLogo",
        "        case ecosiaLibrary",
        "        case ecosiaImpact",
        "        case ecosiaNews",
        "        case ecosiaNTPCustomization"
      ],
      "context_before": [
        "        case customizeHomepage",
        "        case spacer"
      ],
      "context_after": [
        "",
        "        var canHandleLongPress: Bool {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageDiffableDataSource.swift",
      "line": 75,
      "type": "addition",
      "comment": "Custom items for Ecosia-specific homepage cells",
      "firefox_code": [],
      "ecosia_code": [
        "        case ecosiaHeader",
        "        case ecosiaLogo",
        "        case ecosiaLibrary",
        "        case ecosiaImpact(sectionIndex: Int)",
        "        case ecosiaNews",
        "        case ecosiaNTPCustomization"
      ],
      "context_before": [
        "        case customizeHomepage",
        "        case spacer"
      ],
      "context_after": [
        "",
        "        static var cellTypes: [ReusableCell.Type] {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 47,
      "type": "addition",
      "comment": "Exposed so Ecosia cell configuration extensions (different file) can dequeue cells.",
      "firefox_code": [],
      "ecosia_code": [
        "    var homepageCollectionView: UICollectionView? { collectionView }",
        "    /* Ecosia: Update dataSource access to use Ecosia's",
        "    private var dataSource: HomepageDiffableDataSource?",
        "     */",
        "    var dataSource: HomepageDiffableDataSource?"
      ],
      "context_before": [
        "    private typealias a11y = AccessibilityIdentifiers.FirefoxHomepage",
        "    private var collectionView: UICollectionView?"
      ],
      "context_after": [
        "    // Ecosia: Data source type to instantiate; Ecosia sets this to use EcosiaHomepageDiffableDataSource",
        "    var homepageDataSourceType: HomepageDiffableDataSource.Type = HomepageDiffableDataSource.self"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 49,
      "type": "removal",
      "comment": "Update dataSource access to use Ecosia's",
      "firefox_code": [
        "    private var dataSource: HomepageDiffableDataSource?"
      ],
      "ecosia_code": [],
      "context_before": [
        "    /// Ecosia: Exposed so Ecosia cell configuration extensions (different file) can dequeue cells.",
        "    var homepageCollectionView: UICollectionView? { collectionView }"
      ],
      "context_after": [
        "    var dataSource: HomepageDiffableDataSource?",
        "    // Ecosia: Data source type to instantiate; Ecosia sets this to use EcosiaHomepageDiffableDataSource"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 55,
      "type": "addition",
      "comment": "Called after the data source is created so customizations (e.g. Ecosia adapter) can be applied",
      "firefox_code": [],
      "ecosia_code": [
        "    var onDataSourceConfigured: ((HomepageDiffableDataSource) -> Void)?",
        "    private lazy var wallpaperView: WallpaperBackgroundView = .build { _ in }"
      ],
      "context_before": [
        "    // Ecosia: Data source type to instantiate; Ecosia sets this to use EcosiaHomepageDiffableDataSource",
        "    var homepageDataSourceType: HomepageDiffableDataSource.Type = HomepageDiffableDataSource.self"
      ],
      "context_after": [
        "",
        "    private let jumpBackInContextualHintViewController: ContextualHintViewController"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 174,
      "type": "addition",
      "comment": "Trigger Ecosia data loading",
      "firefox_code": [],
      "ecosia_code": [
        "        ecosiaViewWillAppear()"
      ],
      "context_before": [
        "        )",
        "        termsOfUseDelegate?.showTermsOfUse(context: .homepageOpened)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 197,
      "type": "addition",
      "comment": "Clean up Ecosia resources",
      "firefox_code": [],
      "ecosia_code": [
        "        ecosiaViewDidDisappear()"
      ],
      "context_before": [
        "        super.viewDidDisappear(animated)",
        "        resetTrackedObjects()"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 376,
      "type": "addition",
      "comment": "Update theme for Ecosia sections",
      "firefox_code": [],
      "ecosia_code": [
        "        updateEcosiaTheme()"
      ],
      "context_before": [
        "        let theme = themeManager.getCurrentTheme(for: windowUUID)",
        "        view.backgroundColor = theme.colors.layer1"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 421,
      "type": "removal",
      "comment": "Use injectable data source type for cell registration",
      "firefox_code": [
        "        HomepageItem.cellTypes.forEach {",
        "            collectionView.register($0, forCellWithReuseIdentifier: $0.cellIdentifier)",
        "        }"
      ],
      "ecosia_code": [],
      "context_before": [
        "        let collectionView = UICollectionView(frame: view.bounds, collectionViewLayout: createLayout())",
        ""
      ],
      "context_after": [
        "        homepageDataSourceType.cellTypesToRegister.forEach {",
        "            collectionView.register($0, forCellWithReuseIdentifier: $0.cellIdentifier)"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 435,
      "type": "addition",
      "comment": "Register supplementary views for Ecosia sections",
      "firefox_code": [],
      "ecosia_code": [
        "        collectionView.registerSupplementary(",
        "            of: UICollectionView.elementKindSectionFooter,",
        "            cellType: NTPImpactDividerFooter.self",
        "        )"
      ],
      "context_before": [
        "        )",
        ""
      ],
      "context_after": [
        "",
        "        collectionView.keyboardDismissMode = .onDrag"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 498,
      "type": "removal",
      "comment": "Use injectable data source type so Ecosia can use EcosiaHomepageDiffableDataSource",
      "firefox_code": [
        "        dataSource = HomepageDiffableDataSource(",
        "            collectionView: collectionView",
        "        ) { [weak self] (collectionView, indexPath, item) -> UICollectionViewCell? in",
        "            return self?.configureCell(for: item, at: indexPath)",
        "        }"
      ],
      "ecosia_code": [],
      "context_before": [
        "        }",
        ""
      ],
      "context_after": [
        "        dataSource = homepageDataSourceType.init(",
        "            collectionView: collectionView"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 515,
      "type": "addition",
      "comment": "Allow Ecosia to attach adapter to data source after creation",
      "firefox_code": [],
      "ecosia_code": [
        "        if let dataSource {",
        "            onDataSourceConfigured?(dataSource)"
      ],
      "context_before": [
        "        }",
        ""
      ],
      "context_after": [
        "            // Ecosia: Apply initial snapshot; newState may have run before viewDidLoad when dataSource was nil",
        "            dataSource.updateSnapshot("
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 518,
      "type": "addition",
      "comment": "Apply initial snapshot; newState may have run before viewDidLoad when dataSource was nil",
      "firefox_code": [],
      "ecosia_code": [
        "            dataSource.updateSnapshot(",
        "                state: homepageState,",
        "                jumpBackInDisplayConfig: getJumpBackInDisplayConfig()",
        "            )"
      ],
      "context_before": [
        "        if let dataSource {",
        "            onDataSourceConfigured?(dataSource)"
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 685,
      "type": "addition",
      "comment": "Custom cell configuration",
      "firefox_code": [],
      "ecosia_code": [
        "        case .ecosiaHeader:",
        "            return configureEcosiaHeaderCell(at: indexPath)",
        "        case .ecosiaLogo:",
        "            return configureEcosiaLogoCell(at: indexPath)",
        "        case .ecosiaLibrary:",
        "            return configureEcosiaLibraryCell(at: indexPath)",
        "        case .ecosiaImpact(let sectionIndex):",
        "            return configureEcosiaImpactCell(at: indexPath, sectionIndex: sectionIndex)",
        "        case .ecosiaNews:",
        "            return configureEcosiaNewsCell(at: indexPath)",
        "        case .ecosiaNTPCustomization:",
        "            return configureEcosiaNTPCustomizationCell(at: indexPath)"
      ],
      "context_before": [
        "            return spacerCell",
        ""
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 724,
      "type": "addition",
      "comment": "Handle footer for impact section",
      "firefox_code": [],
      "ecosia_code": [
        "            if case .ecosiaImpact = section {",
        "                guard let footerView = collectionView.dequeueSupplementary(",
        "                    of: kind,",
        "                    cellType: NTPImpactDividerFooter.self,",
        "                    for: indexPath)",
        "                else { return UICollectionReusableView() }",
        "                footerView.applyTheme(theme: currentTheme)",
        "                return footerView"
      ],
      "context_before": [
        "            return self.configureSectionHeader(for: section, with: sectionHeaderView)",
        "        case UICollectionView.elementKindSectionFooter:"
      ],
      "context_after": [
        "            }",
        "            return nil"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/HomepageViewController.swift",
      "line": 880,
      "type": "addition",
      "comment": "Internal so Ecosia cell configuration extension can open homepage settings.",
      "firefox_code": [],
      "ecosia_code": [
        "    func navigateToHomepageSettings() {",
        "        store.dispatch(",
        "            NavigationBrowserAction(",
        "                navigationDestination: NavigationDestination(.settings(.homePage)),",
        "                windowUUID: self.windowUUID,",
        "                actionType: NavigationBrowserActionType.tapOnCustomizeHomepageButton",
        "            )",
        "        )"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/Layout/HomepageSectionLayoutProvider.swift",
      "line": 147,
      "type": "addition",
      "comment": "Handle custom sections",
      "firefox_code": [],
      "ecosia_code": [
        "        if let ecosiaLayout = createEcosiaLayoutSection(for: section, with: environment) {",
        "            return ecosiaLayout"
      ],
      "context_before": [
        "        with environment: NSCollectionLayoutEnvironment",
        "    ) -> NSCollectionLayoutSection {"
      ],
      "context_after": [
        "        }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Home/Homepage/Layout/HomepageSectionLayoutProvider.swift",
      "line": 195,
      "type": "addition",
      "comment": "Add default statement to silence switch case",
      "firefox_code": [],
      "ecosia_code": [
        "        default:",
        "            return NSCollectionLayoutSection(group: .init(layoutSize:",
        "                    .init(widthDimension: .absolute(0), heightDimension: .absolute(0)),",
        "                                                          supplementaryItems: []))"
      ],
      "context_before": [
        "        case .spacer:",
        "            return createSpacerSectionLayout(for: environment)"
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/Share/ShareTelemetry.swift",
      "line": 4,
      "type": "substitution",
      "comment": "This file contains Firefox's telemetry code which is kept intact for easier upgrades.",
      "firefox_code": [
        "All telemetry calls are silenced via NoOpGleanWrapper - see Client/Ecosia/Telemetry/NoOpGleanWrapper.swift",
        "No need to comment out individual calls; they compile successfully but do nothing at runtime."
      ],
      "ecosia_code": [],
      "context_before": [
        "// License, v. 2.0. If a copy of the MPL was not distributed with this",
        "// file, You can obtain one at http://mozilla.org/MPL/2.0/"
      ],
      "context_after": [
        "",
        "import Foundation"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 8,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.showClearCookiesAlert.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "struct TrackingProtectionTelemetry {",
        "    func showClearCookiesAlert() {"
      ],
      "context_after": [
        "",
        "    func clearCookiesAndSiteData() {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 13,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.tappedClearCookies.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    func clearCookiesAndSiteData() {"
      ],
      "context_after": [
        "",
        "    func showTrackingProtectionDetails() {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 18,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.showEtpDetails.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    func showTrackingProtectionDetails() {"
      ],
      "context_after": [
        "",
        "    func showBlockedTrackersDetails() {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 23,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.showEtpBlockedTrackersDetails.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    func showBlockedTrackersDetails() {"
      ],
      "context_after": [
        "",
        "    func tappedShowSettings() {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 28,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.showEtpSettings.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    func tappedShowSettings() {"
      ],
      "context_after": [
        "",
        "    func dismissTrackingProtection() {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 33,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.dismissEtpPanel.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    func dismissTrackingProtection() {"
      ],
      "context_after": [
        "",
        "    func trackShowCertificates() {"
      ]
    },
    {
      "file": "firefox-ios/Client/Frontend/TrackingProtection/TrackingProtectionTelemetry.swift",
      "line": 38,
      "type": "substitution",
      "comment": "Telemetry metrics removed in Firefox 147.2",
      "firefox_code": [
        "GleanMetrics.TrackingProtection.showCertificates.record()"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    func trackShowCertificates() {"
      ],
      "context_after": [
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/IntroScreenManager.swift",
      "line": 20,
      "type": "removal",
      "comment": "Update intro rule",
      "firefox_code": [
        "        prefs.intForKey(PrefsKeys.IntroSeen) == nil"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "    var shouldShowIntroScreen: Bool {"
      ],
      "context_after": [
        "        User.shared.firstTime",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Client/TabManagement/Tab.swift",
      "line": 14,
      "type": "removal",
      "comment": "Remove unneded and old debug code",
      "firefox_code": [
        "#if DEBUG",
        "private var debugTabCount = 0",
        "#endif"
      ],
      "ecosia_code": [],
      "context_before": [
        "import TabDataStore",
        ""
      ],
      "context_after": [
        "",
        "@MainActor"
      ]
    },
    {
      "file": "firefox-ios/Client/TabManagement/Tab.swift",
      "line": 473,
      "type": "removal",
      "comment": "Remove unneded and old debug code",
      "firefox_code": [
        "#if DEBUG",
        "        debugTabCount += 1",
        "#endif"
      ],
      "ecosia_code": [],
      "context_before": [
        "        super.init()",
        "        self.isPrivate = isPrivate"
      ],
      "context_after": [
        "        TelemetryWrapper.recordEvent(",
        "            category: .action,"
      ]
    },
    {
      "file": "firefox-ios/Client/TabManagement/Tab.swift",
      "line": 590,
      "type": "removal",
      "comment": "Remove unneded and old debug code",
      "firefox_code": [
        "#if DEBUG",
        "        debugTabCount -= 1",
        "        guard let appDelegate = UIApplication.shared.delegate as? AppDelegate else { return }",
        "        func checkTabCount(failures: Int) {",
        "            // Need delay for pool to drain.",
        "            DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) {",
        "                if appDelegate.tabManager.remoteTabs.count == debugTabCount {",
        "                    return",
        "                }",
        "                // If this assert has false positives, remove it and just log an error.",
        "                assert(failures < 3, \"Tab init/deinit imbalance, possible memory leak.\")",
        "                checkTabCount(failures: failures + 1)",
        "            }",
        "        }",
        "        checkTabCount(failures: 0)",
        "#endif"
      ],
      "ecosia_code": [],
      "context_before": [
        "        webViewLoadingObserver?.invalidate()",
        "        deleteDownloadedDocuments(docsURL: temporaryDocumentsSession)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/TabManagement/TabManagerImplementation.swift",
      "line": 58,
      "type": "removal",
      "comment": "filter out invisible tabs",
      "firefox_code": [
        "        return tabs.filter { !$0.isPrivate }"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "    var normalTabs: [Tab] {"
      ],
      "context_after": [
        "        return tabs.filter { $0.isPrivate == false && !$0.isInvisible }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/GleanWrapper.swift",
      "line": 47,
      "type": "addition",
      "comment": "Shared instance for dependency injection",
      "firefox_code": [],
      "ecosia_code": [
        "    static let shared = DefaultGleanWrapper()"
      ],
      "context_before": [
        "/// Glean wrapper to abstract Glean from our application",
        "struct DefaultGleanWrapper: GleanWrapper {"
      ],
      "context_after": [
        "",
        "    private let glean: Glean"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/GleanWrapper.swift",
      "line": 51,
      "type": "substitution",
      "comment": "Use FakeGleanWrapper to silence all Firefox telemetry",
      "firefox_code": [
        "This allows us to keep Firefox's telemetry code intact while preventing any actual data collection"
      ],
      "ecosia_code": [
        "    private let fakeWrapper = FakeGleanWrapper()"
      ],
      "context_before": [
        "",
        "    private let glean: Glean"
      ],
      "context_after": [
        "",
        "    init(glean: Glean = Glean.shared) {"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/GleanWrapper.swift",
      "line": 59,
      "type": "substitution",
      "comment": "All methods below delegate to NoOpGleanWrapper (no-op) instead of real Glean implementation",
      "firefox_code": [
        "This centralizes telemetry silencing in one place, making Firefox upgrades easier"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "    func handleDeeplinkUrl(url: URL) {"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/HistoryDeletionUtilityTelemetry.swift",
      "line": 4,
      "type": "substitution",
      "comment": "This file contains Firefox's telemetry code which is kept intact for easier upgrades.",
      "firefox_code": [
        "All telemetry calls are silenced via NoOpGleanWrapper - see Client/Ecosia/Telemetry/NoOpGleanWrapper.swift",
        "No need to comment out individual calls; they compile successfully but do nothing at runtime."
      ],
      "ecosia_code": [],
      "context_before": [
        "// License, v. 2.0. If a copy of the MPL was not distributed with this",
        "// file, You can obtain one at http://mozilla.org/MPL/2.0/"
      ],
      "context_after": [
        "",
        "import Foundation"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/HomepageTelemetry.swift",
      "line": 5,
      "type": "substitution",
      "comment": "This file contains Firefox's telemetry code which is kept intact for easier upgrades.",
      "firefox_code": [
        "All telemetry calls are silenced via NoOpGleanWrapper - see Client/Ecosia/Telemetry/NoOpGleanWrapper.swift",
        "No need to comment out individual calls; they compile successfully but do nothing at runtime."
      ],
      "ecosia_code": [],
      "context_before": [
        "// file, You can obtain one at http://mozilla.org/MPL/2.0/",
        ""
      ],
      "context_after": [
        "",
        "import Foundation"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/NotificationManagerTelemetry.swift",
      "line": 34,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let permissionExtra = GleanMetrics.App.NotificationPermissionExtra(",
        "            alertSetting: alertSetting,",
        "            status: authorizationStatus",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.App.notificationPermission,",
        "                                 extras: permissionExtra)"
      ],
      "context_before": [
        "        }",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/NotificationManagerTelemetry.swift",
      "line": 44,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let permissionExtra = GleanMetrics.Onboarding.NotificationPermissionPromptExtra(granted: isPermissionGranted)",
        "        gleanWrapper.recordEvent(for: GleanMetrics.Onboarding.notificationPermissionPrompt,",
        "                                 extras: permissionExtra)"
      ],
      "context_before": [
        "",
        "    func sendNotificationPermissionPrompt(isPermissionGranted: Bool) {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/PrivateBrowsingTelemetry.swift",
      "line": 16,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let didConfirmExtra = GleanMetrics.PrivateBrowsing.DataClearanceIconTappedExtra(didConfirm: didConfirm)",
        "        gleanWrapper.recordEvent(for: GleanMetrics.PrivateBrowsing.dataClearanceIconTapped, extras: didConfirmExtra)"
      ],
      "context_before": [
        "",
        "    func sendDataClearanceTappedTelemetry(didConfirm: Bool) {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 177,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        GleanMetrics.Search.inContent[\"\\(provider).in-content.sap.\\(code)\"].add()"
      ],
      "context_before": [
        "    // sap: directly from search access point",
        "    func trackSAP() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 183,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        GleanMetrics.Search.inContent[\"\\(provider).in-content.sap-follow-on.\\(code)\"].add()"
      ],
      "context_before": [
        "    // sap-follow-on: user continues to search from an existing sap search",
        "    func trackSAPFollowOn() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 189,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        GleanMetrics.Search.inContent[\"\\(provider).organic.none\"].add()"
      ],
      "context_before": [
        "    // organic: search that didn't come from a SAP",
        "    func trackOrganic() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 197,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        GleanMetrics.Search.googleTopsitePressed[\"\\(SearchEngine.google).\\(code)\"].add()"
      ],
      "context_before": [
        "    // Note: This tracks google top site tile tap which opens a google search page",
        "    func trackGoogleTopSiteTap() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 205,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        GleanMetrics.Search.inContent[\"\\(SearchEngine.google).in-content.google-topsite-follow-on.\\(code)\"].add()"
      ],
      "context_before": [
        "    // Flow: User taps google top site tile -> google page opens -> user types item to search in the page",
        "    func trackGoogleTopSiteFollowOn() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 527,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let countExtra = GleanMetrics.SearchTrendingSearches.SuggestionsShownExtra(count: Int32(count))",
        "        gleanWrapper.recordEvent(for: GleanMetrics.SearchTrendingSearches.suggestionsShown, extras: countExtra)"
      ],
      "context_before": [
        "    // MARK: Trending Searches",
        "    func trendingSearchesShown(count: Int) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 534,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let positionExtra = GleanMetrics.SearchTrendingSearches.SuggestionTappedExtra(position: Int32(position))",
        "        gleanWrapper.recordEvent(for: GleanMetrics.SearchTrendingSearches.suggestionTapped, extras: positionExtra)"
      ],
      "context_before": [
        "    func trendingSearchesTapped(at index: Int) {",
        "        let position = \"\\(index + 1)\""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 541,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let countExtra = GleanMetrics.SearchRecentSearches.SuggestionsShownExtra(count: Int32(count))",
        "        gleanWrapper.recordEvent(for: GleanMetrics.SearchRecentSearches.suggestionsShown, extras: countExtra)"
      ],
      "context_before": [
        "    // MARK: Recent Searches",
        "    func recentSearchesShown(count: Int) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 548,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let positionExtra = GleanMetrics.SearchRecentSearches.SuggestionTappedExtra(position: Int32(position))",
        "        gleanWrapper.recordEvent(for: GleanMetrics.SearchRecentSearches.suggestionTapped, extras: positionExtra)"
      ],
      "context_before": [
        "    func recentSearchesTapped(at index: Int) {",
        "        let position = \"\\(index + 1)\""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SearchTelemetry.swift",
      "line": 554,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordEvent(for: GleanMetrics.SearchRecentSearches.clearButtonTapped)"
      ],
      "context_before": [
        "",
        "    func recentSearchesClearButtonTapped() {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift",
      "line": 31,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extra = GleanMetrics.ShareOpenInFirefoxExtensionList.OptionSelectedExtra(",
        "            extensionSource: Self.extensionSource,",
        "            option: ShareExtensionOption.openInFirefox.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.ShareOpenInFirefoxExtensionList.optionSelected, extras: extra)"
      ],
      "context_before": [
        "    /// Records when a user shares a URL from the Share Extension",
        "    func shareURL() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift",
      "line": 41,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extra = GleanMetrics.ShareOpenInFirefoxExtensionList.OptionSelectedExtra(",
        "            extensionSource: Self.extensionSource,",
        "            option: ShareExtensionOption.openInFirefox.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.ShareOpenInFirefoxExtensionList.optionSelected, extras: extra)"
      ],
      "context_before": [
        "    /// Records when a user shares text from the Share Extension",
        "    func shareText() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift",
      "line": 51,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extra = GleanMetrics.ShareOpenInFirefoxExtensionList.OptionSelectedExtra(",
        "            extensionSource: Self.extensionSource,",
        "            option: ShareExtensionOption.loadInBackground.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.ShareOpenInFirefoxExtensionList.optionSelected, extras: extra)"
      ],
      "context_before": [
        "    /// Records when a user loads a page in the background from the Share Extension",
        "    func loadInBackground() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift",
      "line": 61,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extra = GleanMetrics.ShareOpenInFirefoxExtensionList.OptionSelectedExtra(",
        "            extensionSource: Self.extensionSource,",
        "            option: ShareExtensionOption.bookmarkThisPage.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.ShareOpenInFirefoxExtensionList.optionSelected, extras: extra)"
      ],
      "context_before": [
        "    /// Records when a user bookmarks a page from the Share Extension",
        "    func bookmarkThisPage() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift",
      "line": 71,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extra = GleanMetrics.ShareOpenInFirefoxExtensionList.OptionSelectedExtra(",
        "            extensionSource: Self.extensionSource,",
        "            option: ShareExtensionOption.addToReadingList.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.ShareOpenInFirefoxExtensionList.optionSelected, extras: extra)"
      ],
      "context_before": [
        "    /// Records when a user adds a page to the reading list from the Share Extension",
        "    func addToReadingList() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShareExtensionTelemetry.swift",
      "line": 81,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extra = GleanMetrics.ShareOpenInFirefoxExtensionList.OptionSelectedExtra(",
        "            extensionSource: Self.extensionSource,",
        "            option: ShareExtensionOption.sendToDevice.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.ShareOpenInFirefoxExtensionList.optionSelected, extras: extra)"
      ],
      "context_before": [
        "    /// Records when a user sends a tab to another device from the Share Extension",
        "    func sendToDevice() {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShortcutsLibraryTelemetry.swift",
      "line": 16,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordEvent(for: GleanMetrics.HomepageShortcutsLibrary.viewed)"
      ],
      "context_before": [
        "",
        "    func sendShortcutsLibraryViewedEvent() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShortcutsLibraryTelemetry.swift",
      "line": 21,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordEvent(for: GleanMetrics.HomepageShortcutsLibrary.shortcutTapped)"
      ],
      "context_before": [
        "",
        "    func sendShortcutTappedEvent() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ShortcutsLibraryTelemetry.swift",
      "line": 26,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordEvent(for: GleanMetrics.HomepageShortcutsLibrary.closed)"
      ],
      "context_before": [
        "",
        "    func sendShortcutsLibraryClosedEvent() {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/SponsoredTileTelemetry.swift",
      "line": 4,
      "type": "substitution",
      "comment": "This file contains Firefox's telemetry code which is kept intact for easier upgrades.",
      "firefox_code": [
        "All telemetry calls are silenced via NoOpGleanWrapper - see Client/Ecosia/Telemetry/NoOpGleanWrapper.swift",
        "No need to comment out individual calls; they compile successfully but do nothing at runtime."
      ],
      "ecosia_code": [],
      "context_before": [
        "// License, v. 2.0. If a copy of the MPL was not distributed with this",
        "// file, You can obtain one at http://mozilla.org/MPL/2.0/"
      ],
      "context_after": [
        "",
        "import Foundation"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabErrorTelemetryHelper.swift",
      "line": 60,
      "type": "addition",
      "comment": "Fixed Swift concurrency - wrap in @MainActor closure",
      "firefox_code": [],
      "ecosia_code": [
        "        ensureMainThread { @MainActor in self.recordTabCount(window, entryPoint: .backgroundForeground) }"
      ],
      "context_before": [
        "    /// identify potential tab-loss errors.",
        "    nonisolated func recordTabCountForBackgroundedScene(_ window: WindowUUID) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabErrorTelemetryHelper.swift",
      "line": 67,
      "type": "addition",
      "comment": "Fixed Swift concurrency - wrap in @MainActor closure",
      "firefox_code": [],
      "ecosia_code": [
        "        ensureMainThread { @MainActor in self.validateTabCount(window, entryPoint: .backgroundForeground) }"
      ],
      "context_before": [
        "    /// count is consistent with the count upon backgrounding.",
        "    nonisolated func validateTabCountForForegroundedScene(_ window: WindowUUID) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 52,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanel.NewTabButtonTappedExtra(mode: mode.rawValue)",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanel.newTabButtonTapped, extras: extras)"
      ],
      "context_before": [
        "        }",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 58,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanel.TabModeSelectedExtra(mode: mode.rawValue)",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanel.tabModeSelected, extras: extras)"
      ],
      "context_before": [
        "",
        "    func tabModeSelected(mode: Mode) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 65,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanel.TabSelectedExtra(mode: mode.rawValue, selectedTabIndex: indexForGlean)",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanel.tabSelected, extras: extras)"
      ],
      "context_before": [
        "    func tabSelected(at index: Int?, mode: Mode) {",
        "        let indexForGlean: Int32? = index != nil ? Int32(index!) : nil"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 71,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanelCloseAllTabsSheet.OptionSelectedExtra(",
        "            mode: mode.rawValue,",
        "            option: option.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanelCloseAllTabsSheet.optionSelected, extras: extras)"
      ],
      "context_before": [
        "",
        "    func closeAllTabsSheetOptionSelected(option: CloseAllPanelOption, mode: Mode) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 80,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanel.TabClosedExtra(",
        "            mode: mode.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanel.tabClosed, extras: extras)"
      ],
      "context_before": [
        "",
        "    func tabClosed(mode: Mode) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 88,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanel.DoneButtonTappedExtra(mode: mode.rawValue)",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanel.doneButtonTapped, extras: extras)"
      ],
      "context_before": [
        "",
        "    func doneButtonTapped(mode: Mode) {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsPanelTelemetry.swift",
      "line": 94,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.TabsPanelCloseOldTabsSheet.OptionSelectedExtra(",
        "            period: period.rawValue",
        "        )",
        "        gleanWrapper.recordEvent(for: GleanMetrics.TabsPanelCloseOldTabsSheet.optionSelected, extras: extras)"
      ],
      "context_before": [
        "",
        "    func deleteNormalTabsSheetOptionSelected(period: TabsDeletionPeriod) {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsTelemetry.swift",
      "line": 20,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        tabSwitchTimerId = gleanWrapper.startTiming(for: GleanMetrics.Tabs.tabSwitch)"
      ],
      "context_before": [
        "",
        "    func startTabSwitchMeasurement() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsTelemetry.swift",
      "line": 26,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.stopAndAccumulateTiming(for: GleanMetrics.Tabs.tabSwitch, timerId: timerId)",
        "        tabSwitchTimerId = nil"
      ],
      "context_before": [
        "    func stopTabSwitchMeasurement() {",
        "        guard let timerId = tabSwitchTimerId else { return }"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TabsTelemetry.swift",
      "line": 32,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        let extras = GleanMetrics.Webview.ProcessDidTerminateExtra(consecutiveCrash: Int32(attemptNumber))",
        "        gleanWrapper.recordEvent(for: GleanMetrics.Webview.processDidTerminate,",
        "                                 extras: extras)"
      ],
      "context_before": [
        "",
        "    func trackConsecutiveCrashTelemetry(attemptNumber: UInt) {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryContextualIdentifier.swift",
      "line": 29,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "            GleanMetrics.TopSites.contextId.set(clientUUID)",
        "        } else {",
        "            let newUUID = UUID()",
        "            contextId = newUUID.uuidString"
      ],
      "context_before": [
        "        // Use existing client UUID, if doesn't exists create a new one",
        "        if let stringContextId = contextId, let clientUUID = UUID(uuidString: stringContextId), allowed {"
      ],
      "context_after": [
        "",
        "            guard allowed else { return }"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryContextualIdentifier.swift",
      "line": 36,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "            GleanMetrics.TopSites.contextId.set(newUUID)"
      ],
      "context_before": [
        "",
        "            guard allowed else { return }"
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 112,
      "type": "substitution",
      "comment": "These GleanMetrics namespaces don't exist in Ecosia's generated metrics",
      "firefox_code": [
        "All telemetry is silenced via NoOpGleanWrapper, so these initialization calls are not needed"
      ],
      "ecosia_code": [
        "        /*",
        "        let defaultEngine = searchEnginesManager.defaultEngine",
        "        GleanMetrics.Search.defaultEngine.set(defaultEngine?.telemetryID ?? \"unavailable\")"
      ],
      "context_before": [
        "        // the event in the startup sequence.",
        ""
      ],
      "context_after": [
        "",
        "        // Set the date that the app was last used as default browser"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 159,
      "type": "substitution",
      "comment": "GleanMetrics.Pings doesn't exist in Ecosia's generated metrics",
      "firefox_code": [
        "glean.registerPings(GleanMetrics.Pings.shared)"
      ],
      "ecosia_code": [],
      "context_before": [
        "        }",
        ""
      ],
      "context_after": [
        "",
        "        // Initialize Glean telemetry"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 163,
      "type": "addition",
      "comment": "Simplified configuration without custom ping uploader",
      "firefox_code": [],
      "ecosia_code": [
        "        let gleanConfig: Configuration",
        "        if let pingUploader = GleanPingUploader() {",
        "            gleanConfig = Configuration(",
        "                channel: AppConstants.buildChannel.rawValue,",
        "                logLevel: .off,",
        "                httpClient: pingUploader",
        "            )",
        "        } else {",
        "            gleanConfig = Configuration(",
        "                channel: AppConstants.buildChannel.rawValue,",
        "                logLevel: .off",
        "            )"
      ],
      "context_before": [
        "",
        "        // Initialize Glean telemetry"
      ],
      "context_after": [
        "        }",
        "        glean.initialize(uploadEnabled: sendUsageData,"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 225,
      "type": "addition",
      "comment": "Fixed Swift concurrency - wrap in @MainActor closure",
      "firefox_code": [],
      "ecosia_code": [
        "            ensureMainThread { @MainActor in",
        "                self.recordEnteredBackgroundPreferenceMetrics()"
      ],
      "context_before": [
        "            // For recording metrics that are better recorded when going to background due",
        "            // to the particular measurement, or availability of the information."
      ],
      "context_after": [
        "            }",
        "        case UIApplication.didFinishLaunchingNotification:"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 230,
      "type": "addition",
      "comment": "Fixed Swift concurrency - wrap in @MainActor closure",
      "firefox_code": [],
      "ecosia_code": [
        "            ensureMainThread { @MainActor in",
        "                self.recordFinishedLaunchingPreferenceMetrics()"
      ],
      "context_before": [
        "            }",
        "        case UIApplication.didFinishLaunchingNotification:"
      ],
      "context_after": [
        "            }",
        "        default:"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 335,
      "type": "addition",
      "comment": "Summarizer feature not available",
      "firefox_code": [],
      "ecosia_code": [
        "        /*"
      ],
      "context_before": [
        "        GleanMetrics.Preferences.openingScreen.set(startAtHomeOption.rawValue)",
        ""
      ],
      "context_after": [
        "        // Record summarizer user preferences",
        "        let summarizerNimbusUtils = DefaultSummarizerNimbusUtils()"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 1566,
      "type": "addition",
      "comment": "GleanMetrics.Messaging not available - silenced via NoOpGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "            /*",
        "            if let actionUUID = extras?[EventExtraKey.actionUUID.rawValue] as? String {",
        "                GleanMetrics.Messaging.clicked.record(",
        "                    GleanMetrics.Messaging.ClickedExtra(",
        "                        actionUuid: actionUUID,",
        "                        messageKey: messageId,",
        "                        messageSurface: messageSurface",
        "                    )",
        "                )",
        "            } else {",
        "                GleanMetrics.Messaging.clicked.record(",
        "                    GleanMetrics.Messaging.ClickedExtra(",
        "                        messageKey: messageId,",
        "                        messageSurface: messageSurface",
        "                    )",
        "                )"
      ],
      "context_before": [
        "            else { return }",
        ""
      ],
      "context_after": [
        "            }",
        "             */"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 1590,
      "type": "addition",
      "comment": "GleanMetrics.Messaging not available - silenced via NoOpGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "            /*",
        "            GleanMetrics.Messaging.expired.record(",
        "                GleanMetrics.Messaging.ExpiredExtra(",
        "                    messageKey: messageId,",
        "                    messageSurface: messageSurface",
        "                )",
        "            )",
        "             */",
        "        case(.information, .application, .messaging, .messageMalformed, let extras):",
        "            guard let messageSurface = extras?[EventExtraKey.messageSurface.rawValue] as? String,",
        "                  let messageId = extras?[EventExtraKey.messageKey.rawValue] as? String",
        "            else { return }"
      ],
      "context_before": [
        "            else { return }",
        ""
      ],
      "context_after": [
        "",
        "            // Ecosia: GleanMetrics.Messaging not available - silenced via NoOpGleanWrapper"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 1604,
      "type": "addition",
      "comment": "GleanMetrics.Messaging not available - silenced via NoOpGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "            /*",
        "            GleanMetrics.Messaging.malformed.record(",
        "                GleanMetrics.Messaging.MalformedExtra(",
        "                    messageKey: messageId,",
        "                    messageSurface: messageSurface",
        "                )",
        "            )",
        "             */"
      ],
      "context_before": [
        "            else { return }",
        ""
      ],
      "context_after": [
        "",
        "        // MARK: - App Errors"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 1615,
      "type": "addition",
      "comment": "GleanMetrics.AppErrors not available - silenced via NoOpGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        case(.information, .error, .app, .largeFileWrite, let extras):",
        "            /*",
        "            if let quantity = extras?[EventExtraKey.size.rawValue] as? Int32 {",
        "                let properties = GleanMetrics.AppErrors.LargeFileWriteExtra(size: quantity)",
        "                GleanMetrics.AppErrors.largeFileWrite.record(properties)",
        "            } else {",
        "                recordUninstrumentedMetrics(category: category, method: method, object: object, value: value, extras: extras)"
      ],
      "context_before": [
        "",
        "        // MARK: - App Errors"
      ],
      "context_after": [
        "            }",
        "             */"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/TelemetryWrapper.swift",
      "line": 1654,
      "type": "addition",
      "comment": "GleanMetrics.Webview not available - silenced via NoOpGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        case(.information, .error, .webview, .webviewFail, _):"
      ],
      "context_before": [
        "",
        "        // MARK: Webview"
      ],
      "context_after": [
        "            // GleanMetrics.Webview.didFail.record()",
        "            break"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ToastTelemetry.swift",
      "line": 16,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordEvent(for: GleanMetrics.ToastsCloseSingleTab.undoTapped)"
      ],
      "context_before": [
        "",
        "    func undoClosedSingleTab() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/ToastTelemetry.swift",
      "line": 21,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordEvent(for: GleanMetrics.ToastsCloseAllTabs.undoTapped)"
      ],
      "context_before": [
        "",
        "    func undoClosedAllTabs() {"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/UserTelemetry.swift",
      "line": 19,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.recordString(for: GleanMetrics.UserClientAssociation.uid, value: uid)"
      ],
      "context_before": [
        "    /// - Parameter uid: The user's Firefox Account UID.",
        "    func setFirefoxAccountID(uid: String) {"
      ],
      "context_after": [
        "",
        "        // We send the `fx-accounts` ping now that the payload data has been set"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/UserTelemetry.swift",
      "line": 23,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        GleanMetrics.Pings.shared.fxAccounts.submit()"
      ],
      "context_before": [
        "",
        "        // We send the `fx-accounts` ping now that the payload data has been set"
      ],
      "context_after": [
        "    }",
        "}"
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/WebviewTelemetry.swift",
      "line": 19,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        loadTimerId = gleanWrapper.startTiming(for: GleanMetrics.Webview.pageLoad)"
      ],
      "context_before": [
        "",
        "    func start() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/WebviewTelemetry.swift",
      "line": 25,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "        gleanWrapper.stopAndAccumulateTiming(for: GleanMetrics.Webview.pageLoad, timerId: timerId)",
        "        loadTimerId = nil"
      ],
      "context_before": [
        "    func stop() {",
        "        guard let timerId = loadTimerId else { return }"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Client/Telemetry/WebviewTelemetry.swift",
      "line": 32,
      "type": "addition",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [],
      "ecosia_code": [
        "            gleanWrapper.cancelTiming(for: GleanMetrics.Webview.pageLoad, timerId: loadTimerId)"
      ],
      "context_before": [
        "    func cancel() {",
        "        if let loadTimerId {"
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Providers/RustSyncManager.swift",
      "line": 11,
      "type": "addition",
      "comment": "Import for String extensions",
      "firefox_code": [],
      "ecosia_code": [],
      "context_before": [
        "import AuthenticationServices",
        "import Common"
      ],
      "context_after": [
        "",
        "import enum MozillaAppServices.OAuthScope"
      ]
    },
    {
      "file": "firefox-ios/Storage/DefaultSuggestedSites.swift",
      "line": 5,
      "type": "removal",
      "comment": "Import Shared for string constants instead of Localizations",
      "firefox_code": [
        "import Foundation",
        "import Localizations"
      ],
      "ecosia_code": [],
      "context_before": [
        "// file, You can obtain one at http://mozilla.org/MPL/2.0/",
        ""
      ],
      "context_after": [
        "import Foundation",
        "import Shared"
      ]
    },
    {
      "file": "firefox-ios/Storage/DefaultSuggestedSites.swift",
      "line": 11,
      "type": "substitution",
      "comment": "Not needed - suggested sites feature disabled",
      "firefox_code": [
        "import Ecosia",
        "import SiteImageView"
      ],
      "ecosia_code": [],
      "context_before": [
        "import Foundation",
        "import Shared"
      ],
      "context_after": [
        "",
        "open class DefaultSuggestedSites {"
      ]
    },
    {
      "file": "firefox-ios/Storage/DefaultSuggestedSites.swift",
      "line": 18,
      "type": "removal",
      "comment": "Remove Default Suggested Sites - Ecosia doesn't use Firefox's suggested sites",
      "firefox_code": [
        "    private static let urlMap = [",
        "        \"https://www.amazon.com/\": [",
        "            \"as\": \"https://www.amazon.in\",",
        "            \"cy\": \"https://www.amazon.co.uk\",",
        "            \"da\": \"https://www.amazon.co.uk\",",
        "            \"de\": \"https://www.amazon.de\",",
        "            \"dsb\": \"https://www.amazon.de\",",
        "            \"en_GB\": \"https://www.amazon.co.uk\",",
        "            \"et\": \"https://www.amazon.co.uk\",",
        "            \"ff\": \"https://www.amazon.fr\",",
        "            \"ga_IE\": \"https://www.amazon.co.uk\",",
        "            \"gu_IN\": \"https://www.amazon.in\",",
        "            \"hi_IN\": \"https://www.amazon.in\",",
        "            \"hr\": \"https://www.amazon.co.uk\",",
        "            \"hsb\": \"https://www.amazon.de\",",
        "            \"ja\": \"https://www.amazon.co.jp\",",
        "            \"kn\": \"https://www.amazon.in\",",
        "            \"mr\": \"https://www.amazon.in\",",
        "            \"or\": \"https://www.amazon.in\",",
        "            \"sq\": \"https://www.amazon.co.uk\",",
        "            \"ta\": \"https://www.amazon.in\",",
        "            \"te\": \"https://www.amazon.in\",",
        "            \"ur\": \"https://www.amazon.in\",",
        "            \"en_CA\": \"https://www.amazon.ca\",",
        "            \"fr_CA\": \"https://www.amazon.ca\"",
        "        ]",
        "    ]",
        "    private static let sites = [",
        "        \"default\": [",
        "            Site.createSuggestedSite(",
        "                url: \"https://m.facebook.com/\",",
        "                title: .DefaultSuggestedFacebook,",
        "                trackingId: 632,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"facebook\",",
        "                    forRemoteResource: URL(string: \"https://static.xx.fbcdn.net/rsrc.php/v3/yi/r/4Kv5U5b1o3f.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://m.youtube.com/\",",
        "                title: .DefaultSuggestedYouTube,",
        "                trackingId: 631,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"youtube\",",
        "                    forRemoteResource: URL(string: \"https://m.youtube.com/static/apple-touch-icon-180x180-precomposed.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://www.amazon.com/\",",
        "                title: .DefaultSuggestedAmazon,",
        "                trackingId: 630,",
        "                // NOTE: Amazon does not host a high quality favicon. We are falling back to the one hosted in our",
        "                // UnifiedAdsProvider.prodResourceEndpoint (https://ads.mozilla.org/v1/ads).",
        "                faviconResource: .bundleAsset(",
        "                    name: \"amazon\",",
        "                    forRemoteResource: URL(string: \"https://tiles-cdn.prod.ads.prod.webservices.mozgcp.net/CAP5k4gWqcBGwir7bEEmBWveLMtvldFu-y_kyO3txFA=.9991.jpg\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://www.wikipedia.org/\",",
        "                title: .DefaultSuggestedWikipedia,",
        "                trackingId: 629,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"wikipedia\",",
        "                    forRemoteResource: URL(string: \"https://www.wikipedia.org/static/apple-touch/wikipedia.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://x.com/\",",
        "                title: .DefaultSuggestedX,",
        "                trackingId: 628,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"x\",",
        "                    forRemoteResource: URL(string: \"https://abs.twimg.com/responsive-web/client-web/icon-ios.77d25eba.png\")!",
        "                )",
        "            )",
        "        ],",
        "        \"zh_CN\": [ // FXIOS-11064 Do we still want this as a special case localization? Android doesn't compile this anymore",
        "            Site.createSuggestedSite(",
        "                url: \"https://m.baidu.com/\",",
        "                title: \"\",",
        "                trackingId: 701,",
        "                faviconResource: .remoteURL(url: URL(string: \"https://psstatic.cdn.bcebos.com/video/wiseindex/aa6eef91f8b5b1a33b454c401_1660835115000.png\")!)",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"http://sina.cn\",",
        "                title: \"\",",
        "                trackingId: 702,",
        "                faviconResource: .remoteURL(url: URL(string: \"https://mjs.sinaimg.cn/wap/online/public/images/addToHome/sina_114x114_v1.png\")!)",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"http://info.3g.qq.com/g/s?aid=index&g_f=23946&g_ut=3\",",
        "                title: \"\",",
        "                trackingId: 703,",
        "                faviconResource: .remoteURL(url: URL(string: \"https://mat1.gtimg.com/qqcdn/qqindex2021/favicon.ico\")!)",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"http://m.taobao.com\",",
        "                title: \"\",",
        "                trackingId: 704,",
        "                faviconResource: .remoteURL(url: URL(string: \"https://gw.alicdn.com/tps/i2/TB1nmqyFFXXXXcQbFXXE5jB3XXX-114-114.png\")!)",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"\"\"",
        "                https://union-click.jd.com/jdc?e=618%7Cpc%7C&p=JF8BAKgJK1olXDYDZBoCUBV\\",
        "                IMzZNXhpXVhgcCEEGXVRFXTMWFQtAM1hXWFttFkhAaihBfRN1XE5ZMipYVQ1uYwxAa1cZb\\",
        "                QIHUV9bCUkQAF8LGFoRXgcAXVttOEsSMyRmGmsXXAcAXFdaAEwVM28PH10TVAMHVVpbDE8\\",
        "                nBG8BKydLFl5fCQ5eCUsSM184GGsSXQ8WUiwcWl8RcV84G1slXTZdEAMAOEkWAmsBK2s",
        "                \"\"\",",
        "                title: \"\",",
        "                trackingId: 705,",
        "                // FXIOS-11064 We need a higher quality favicon link",
        "                faviconResource: .remoteURL(url: URL(string: \"https://corporate.jd.com/favicon.ico\")!)",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"http://douyin.com\",",
        "                title: \"\",",
        "                trackingId: 706,",
        "                faviconResource: .remoteURL(url: URL(string: \"https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/2025_0313_logo.png\")!)",
        "            )",
        "        ],",
        "        \"ja_JP\": [",
        "            Site.createSuggestedSite(",
        "                url: firefoxJpGuideURL,",
        "                title: \"Firefox\",",
        "                trackingId: 804,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"firefox-jp\",",
        "                    forRemoteResource: URL(string: \"https://www.firefox.com/media/img/favicons/firefox/browser/apple-touch-icon.79c2abeb4e35.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://tenki.jp/\",",
        "                title: \"tenki.jp\",",
        "                trackingId: 800,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"tenki\",",
        "                    forRemoteResource: URL(string: \"https://static.tenki.jp/images/icon/bookmark/tenkijp_bookmark_icon_114_114.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://m.yahoo.co.jp/\",",
        "                title: \"Yahoo! JAPAN\",",
        "                trackingId: 802,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"yahoo\",",
        "                    forRemoteResource: URL(string: \"https://s.yimg.jp/c/icon/s/bsc/2.0/y120.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://ameblo.jp/\",",
        "                title: \"Ameba\",",
        "                trackingId: 801,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"ameblo\",",
        "                    forRemoteResource: URL(string: \"https://stat100.ameba.jp/common_style/img/sp/apple-touch-icon.png\")!",
        "                )",
        "            ),",
        "            Site.createSuggestedSite(",
        "                url: \"https://ja.wikipedia.org/wiki/%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%9A%E3%83%BC%E3%82%B8\",",
        "                title: \"\",",
        "                trackingId: 803,",
        "                faviconResource: .bundleAsset(",
        "                    name: \"wikipedia\",",
        "                    forRemoteResource: URL(string: \"https://www.wikipedia.org/static/apple-touch/wikipedia.png\")!",
        "                )",
        "            )",
        "         ],",
        "    ]"
      ],
      "ecosia_code": [],
      "context_before": [
        "    public static let firefoxJpGuideURL = \"https://blog.mozilla.org/ja/firefox-ja/ios-guide/\"",
        ""
      ],
      "context_after": [
        "",
        "    public static func defaultSites() -> [Site] {"
      ]
    },
    {
      "file": "firefox-ios/Storage/DefaultSuggestedSites.swift",
      "line": 192,
      "type": "removal",
      "comment": "Remove default sites - return empty array",
      "firefox_code": [
        "        let locale = Locale.current",
        "        let defaultSites = sites[locale.identifier] ?? sites[\"default\"]",
        "        return defaultSites?.map { site in",
        "            // Override default suggested site URLs with a localized URL for domains in `urlMap` (e.g. localized Amazon)",
        "            if let domainMap = DefaultSuggestedSites.urlMap[site.url],",
        "               let localizedURL = domainMap[locale.identifier] {",
        "                return Site.copiedFrom(site: site, withLocalizedURLString: localizedURL)",
        "            }",
        "            return site",
        "        } ?? []"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "    public static func defaultSites() -> [Site] {"
      ],
      "context_after": [
        "        []",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustAutofill.swift",
      "line": 334,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.UserCreditCards.undecryptableCount.add(Int32(result.totalScrubbedRecords))"
      ],
      "ecosia_code": [
        "                }",
        "                completionHandler(true)",
        "            } catch let err as NSError {",
        "                self.logger.log(\"Error verifying credit cards\",",
        "                                level: .warning,",
        "                                category: .storage,",
        "                                description: err.localizedDescription)",
        "                completionHandler(false)"
      ],
      "context_before": [
        "",
        "                if result.totalScrubbedRecords > 0 {"
      ],
      "context_after": [
        "            }",
        "        }"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustAutofill.swift",
      "line": 485,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics",
        ".PreSyncKeyRetrievalFailure",
        ".creditCards",
        ".record(GleanMetrics.PreSyncKeyRetrievalFailure.CreditCardsExtra(errorMessage: err))"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "    /// Reports when the credit card encryption key can't be rerieved for a credit cards sync",
        "    public func reportPreSyncKeyRetrievalFailure(err: String) {"
      ],
      "context_after": [
        "",
        "    /// Retrieves the stored encryption key."
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustAutofill.swift",
      "line": 506,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.CreditCardKeyRegeneration.other.record()"
      ],
      "ecosia_code": [
        "                self.handleUnexpectedKeyAction(completion: completion)",
        "            case (.none, .some(encryptedCanaryPhrase)):"
      ],
      "context_before": [
        "                                             completion: completion)",
        "            case (.some(key), .none):"
      ],
      "context_after": [
        "                 // Ecosia: Telemetry silenced via FakeGleanWrapper",
        "                 // GleanMetrics.CreditCardKeyRegeneration.lost.record()"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustAutofill.swift",
      "line": 510,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.CreditCardKeyRegeneration.lost.record()"
      ],
      "ecosia_code": [
        "                self.handleUnexpectedKeyAction(completion: completion)",
        "            case (.none, .none):",
        "                self.handleFirstTimeCallOrClearedKeychainAction(completion: completion)",
        "            default:"
      ],
      "context_before": [
        "                self.handleUnexpectedKeyAction(completion: completion)",
        "            case (.none, .some(encryptedCanaryPhrase)):"
      ],
      "context_after": [
        "                // If none of the above cases apply, we're in a state that shouldn't be possible",
        "                // but is disallowed nonetheless"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustAutofill.swift",
      "line": 548,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.CreditCardKeyRegeneration.corrupt.record()"
      ],
      "ecosia_code": [
        "            resetCreditCardsAndKey(completion: completion)"
      ],
      "context_before": [
        "                       level: .warning,",
        "                       category: .storage)"
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustAutofill.swift",
      "line": 574,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.CreditCardKeyRegeneration.keychainDataLost.record()"
      ],
      "ecosia_code": [
        "                    self.resetCreditCardsAndKey(completion: completion)",
        "                } else {"
      ],
      "context_before": [
        "                    // Since the key data isn't present and we have credit card records in",
        "                    // the database, we both scrub the records and reset the key."
      ],
      "context_after": [
        "                    // There are no records in the database so we don't need to scrub any",
        "                    // existing credit card records. We just need to create a new key."
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustLogins.swift",
      "line": 611,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics",
        ".PreSyncKeyRetrievalFailure",
        ".logins",
        ".record(GleanMetrics.PreSyncKeyRetrievalFailure.LoginsExtra(errorMessage: err))"
      ],
      "ecosia_code": [
        "    }"
      ],
      "context_before": [
        "",
        "    public func reportPreSyncKeyRetrievalFailure(err: String) {"
      ],
      "context_after": [
        "",
        "    private func resetLoginsAndKey(completion: @escaping @Sendable (Result<String, NSError>) -> Void) {"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustLogins.swift",
      "line": 671,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.LoginsStoreKeyRegeneration.corrupt.record()"
      ],
      "ecosia_code": [
        "                self.resetLoginsAndKey(completion: completion)"
      ],
      "context_before": [
        "                                level: .warning,",
        "                                category: .storage)"
      ],
      "context_after": [
        "            }",
        "        } catch let error as NSError {"
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustLogins.swift",
      "line": 690,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.LoginsStoreKeyRegeneration.other.record()"
      ],
      "ecosia_code": [
        "        self.resetLoginsAndKey(completion: completion)"
      ],
      "context_before": [
        "                        level: .warning,",
        "                        category: .storage)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustLogins.swift",
      "line": 701,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.LoginsStoreKeyRegeneration.lost.record()"
      ],
      "ecosia_code": [
        "        self.resetLoginsAndKey(completion: completion)"
      ],
      "context_before": [
        "                        level: .warning,",
        "                        category: .storage)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/Storage/Rust/RustLogins.swift",
      "line": 727,
      "type": "substitution",
      "comment": "Telemetry silenced via FakeGleanWrapper",
      "firefox_code": [
        "GleanMetrics.LoginsStoreKeyRegeneration.keychainDataLost.record()"
      ],
      "ecosia_code": [
        "                self.resetLoginsAndKey(completion: completion)",
        "            } else {"
      ],
      "context_before": [
        "                // Since the key data isn't present and we have login records in",
        "                // the database, we both clear the database and reset the key."
      ],
      "context_after": [
        "                // There are no records in the database so we don't need to wipe any",
        "                // existing login records. We just need to create a new key."
      ]
    },
    {
      "file": "firefox-ios/WidgetKit/SearchQuickLinksSmall/SmallQuickLink.swift",
      "line": 8,
      "type": "addition",
      "comment": "Import for String extensions",
      "firefox_code": [],
      "ecosia_code": [],
      "context_before": [
        "import SwiftUI",
        "import WidgetKit"
      ],
      "context_after": [
        "",
        "struct IntentProvider: IntentTimelineProvider {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/BrowserCoordinatorTests.swift",
      "line": 103,
      "type": "removal",
      "comment": "Update HomepageViewController's init",
      "firefox_code": [
        "        let secondHomepage = LegacyHomepageViewController(",
        "            profile: profile,",
        "            toastContainer: UIView(),",
        "            tabManager: tabManager,",
        "            overlayManager: overlayModeManager",
        "        )"
      ],
      "ecosia_code": [],
      "context_before": [
        "        )",
        ""
      ],
      "context_after": [
        "        let secondHomepage = LegacyHomepageViewController(profile: profile,",
        "                                                          toastContainer: UIView(),"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/BrowserCoordinatorTests.swift",
      "line": 795,
      "type": "removal",
      "comment": "Disable Onboarding dependant tests since LaunchCoordinator.presentIntroOnboarding is temporarily disabled",
      "firefox_code": [
        "    func testHandleShowOnboarding_returnsTrueAndShowsOnboarding() {",
        "        let subject = createSubject()",
        "        subject.browserHasLoaded()",
        "        let result = testCanHandleAndHandle(subject, route: .action(action: .showIntroOnboarding))",
        "        XCTAssertTrue(result)",
        "        XCTAssertEqual(subject.childCoordinators.count, 1)",
        "        XCTAssertNotNil(subject.childCoordinators[0] as? LaunchCoordinator)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "    // MARK: - Saved route"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/Launch/LaunchCoordinatorTests.swift",
      "line": 41,
      "type": "removal",
      "comment": "Disable Onboarding dependant tests since LaunchCoordinator.presentIntroOnboarding is temporarily disabled",
      "firefox_code": [
        "    func testStart_introNotIphone_present() throws {",
        "        let introScreenManager = IntroScreenManager(prefs: profile.prefs)",
        "        let subject = createSubject(isIphone: false)",
        "        subject.start(with: .intro(manager: introScreenManager))",
        "        XCTAssertEqual(mockRouter.presentCalled, 1)",
        "        XCTAssertEqual(mockRouter.setRootViewControllerCalled, 0)",
        "        let presentedViewController = try XCTUnwrap(mockRouter.presentedViewController)",
        "        // Ecosia: Update view controller being presented",
        "        // XCTAssertNotNil(presentedViewController as? IntroViewController)",
        "        XCTAssertNotNil(presentedViewController as? WelcomeNavigation)",
        "    }",
        "    func testStart_introIsIphone_setRootView() throws {",
        "        let introScreenManager = IntroScreenManager(prefs: profile.prefs)",
        "        let subject = createSubject(isIphone: true)",
        "        subject.start(with: .intro(manager: introScreenManager))",
        "        XCTAssertEqual(mockRouter.presentCalled, 1)",
        "        XCTAssertEqual(mockRouter.setRootViewControllerCalled, 0)",
        "        let pushedVC = try XCTUnwrap(mockRouter.presentedViewController)",
        "        // Ecosia: Update view controller being presented",
        "        // XCTAssertNotNil(pushedVC as? IntroViewController)",
        "        XCTAssertNotNil(pushedVC as? WelcomeNavigation)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "    // MARK: - Intro"
      ],
      "context_after": [
        "",
        "    // MARK: - Update"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/Launch/LaunchCoordinatorTests.swift",
      "line": 121,
      "type": "removal",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "    func testStart_surveyWithMessage_setRootView() throws {",
        "        let messageManager = MockGleanPlumbMessageManagerProtocol()",
        "        let message = createMessage(isExpired: false)",
        "        messageManager.message = message",
        "        let manager = SurveySurfaceManager(windowUUID: windowUUID, and: messageManager)",
        "        XCTAssertTrue(manager.shouldShowSurveySurface)",
        "        let subject = createSubject(isIphone: false)",
        "        subject.start(with: .survey(manager: manager))",
        "        XCTAssertEqual(mockRouter.presentCalled, 1)",
        "        XCTAssertEqual(mockRouter.setRootViewControllerCalled, 0)",
        "        let pushedVC = try XCTUnwrap(mockRouter.presentedViewController)",
        "        XCTAssertNotNil(pushedVC as? SurveySurfaceViewController)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "        XCTAssertNil(mockRouter.presentedViewController)",
        "    }"
      ],
      "context_after": [
        "",
        "    // MARK: - QRCodeNavigationHandler"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/Launch/LaunchCoordinatorTests.swift",
      "line": 162,
      "type": "removal",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "    func testStart_surveySetsDelegate() throws {",
        "        let messageManager = MockGleanPlumbMessageManagerProtocol()",
        "        let message = createMessage(isExpired: false)",
        "        messageManager.message = message",
        "        let manager = SurveySurfaceManager(windowUUID: windowUUID, and: messageManager)",
        "        XCTAssertTrue(manager.shouldShowSurveySurface)",
        "        let subject = createSubject(isIphone: false)",
        "        subject.start(with: .survey(manager: manager))",
        "        let presentedVC = try XCTUnwrap(mockRouter.presentedViewController as? SurveySurfaceViewController)",
        "        XCTAssertNotNil(presentedVC.delegate)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "    // MARK: - Delegates"
      ],
      "context_after": [
        "",
        "    func testDidFinish_fromSurveySurfaceViewControllerDelegate() {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/Launch/LaunchCoordinatorTests.swift",
      "line": 201,
      "type": "removal",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "    private func createMessage(",
        "        for surface: MessageSurfaceId = .survey,",
        "        isExpired: Bool",
        "    ) -> GleanPlumbMessage {",
        "        let metadata = GleanPlumbMessageMetaData(id: \"\",",
        "                                                 impressions: 0,",
        "                                                 dismissals: 0,",
        "                                                 isExpired: isExpired)",
        "        return GleanPlumbMessage(id: \"12345\",",
        "                                 data: MockSurveyMessageDataProtocol(surface: surface),",
        "                                 action: \"https://mozilla.com\",",
        "                                 triggerIfAll: [],",
        "                                 exceptIfAny: [],",
        "                                 style: MockStyleDataProtocol(),",
        "                                 metadata: metadata)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "}"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 11,
      "type": "substitution",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "private var messageManager: MockGleanPlumbMessageManagerProtocol!"
      ],
      "ecosia_code": [
        "    private var profile: MockProfile!",
        "    private var delegate: MockLaunchFinishedLoadingDelegate!",
        "    let windowUUID: WindowUUID = .XCTestDefaultUUID"
      ],
      "context_before": [
        "",
        "final class LaunchScreenViewModelTests: XCTestCase {"
      ],
      "context_after": [
        "",
        "    override func setUp() {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 23,
      "type": "substitution",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "messageManager = MockGleanPlumbMessageManagerProtocol()"
      ],
      "ecosia_code": [],
      "context_before": [
        "        delegate = MockLaunchFinishedLoadingDelegate()",
        "        LegacyFeatureFlagsManager.shared.initializeDeveloperFeatures(with: profile)"
      ],
      "context_after": [
        "",
        "        UserDefaults.standard.set(true, forKey: PrefsKeys.NimbusFeatureTestsOverride)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 33,
      "type": "substitution",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "messageManager = nil"
      ],
      "ecosia_code": [
        "        delegate = nil"
      ],
      "context_before": [
        "        AppContainer.shared.reset()",
        "        profile = nil"
      ],
      "context_after": [
        "",
        "        UserDefaults.standard.set(false, forKey: PrefsKeys.NimbusFeatureTestsOverride)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 47,
      "type": "removal",
      "comment": "Versioning is testes in a dedicated Ecosia test",
      "firefox_code": [
        "    func testLaunchType_intro() async {",
        "        let subject = createSubject()",
        "        subject.delegate = delegate",
        "        await subject.startLoading(appVersion: \"112.0\")",
        "        guard case .intro = delegate.savedLaunchType else {",
        "            XCTFail(\"Expected intro, but was \\(String(describing: delegate.savedLaunchType))\")",
        "            return",
        "        }",
        "        XCTAssertEqual(delegate.launchBrowserCalled, 0)",
        "        XCTAssertEqual(delegate.launchWithTypeCalled, 1)",
        "    }",
        "    func testLaunchType_update() async {",
        "        profile.prefs.setString(\"112.0\", forKey: PrefsKeys.AppVersion.Latest)",
        "        profile.prefs.setInt(1, forKey: PrefsKeys.IntroSeen)",
        "        let subject = createSubject()",
        "        subject.delegate = delegate",
        "        await subject.startLoading(appVersion: \"113.0\")",
        "        guard case .update = delegate.savedLaunchType else {",
        "            XCTFail(\"Expected update, but was \\(String(describing: delegate.savedLaunchType))\")",
        "            return",
        "        }",
        "        XCTAssertEqual(delegate.launchBrowserCalled, 0)",
        "        XCTAssertEqual(delegate.launchWithTypeCalled, 1)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "        XCTAssertEqual(delegate.launchWithTypeCalled, 0)",
        "    }"
      ],
      "context_after": [
        "",
        "    /* Ecosia: Comment test with no mean to Launch survey"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 78,
      "type": "removal",
      "comment": "Comment test with no mean to Launch survey",
      "firefox_code": [
        "    func testLaunchType_survey() async {",
        "        profile.prefs.setString(\"112.0\", forKey: PrefsKeys.AppVersion.Latest)",
        "        profile.prefs.setInt(1, forKey: PrefsKeys.IntroSeen)",
        "        let message = createMessage()",
        "        messageManager.message = message",
        "        let subject = createSubject()",
        "        subject.delegate = delegate",
        "        await subject.startLoading(appVersion: \"112.0\")",
        "        guard case .survey = delegate.savedLaunchType else {",
        "            XCTFail(\"Expected survey, but was \\(String(describing: delegate.savedLaunchType))\")",
        "            return",
        "        }",
        "        XCTAssertEqual(delegate.launchBrowserCalled, 0)",
        "        XCTAssertEqual(delegate.launchWithTypeCalled, 1)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "     */",
        ""
      ],
      "context_after": [
        "",
        "    /* Ecosia: Versioning is testes in a dedicated Ecosia test"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 98,
      "type": "removal",
      "comment": "Versioning is testes in a dedicated Ecosia test",
      "firefox_code": [
        "    func testSplashScreenExperiment_afterShown_returnsTrue() {",
        "        let subject = createSubject()",
        "        let value = subject.getSplashScreenExperimentHasShown()",
        "        XCTAssertFalse(value)",
        "        subject.setSplashScreenExperimentHasShown()",
        "        let updatedValue = subject.getSplashScreenExperimentHasShown()",
        "        XCTAssertTrue(updatedValue)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "     */",
        ""
      ],
      "context_after": [
        "",
        "    // MARK: - Helpers"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 119,
      "type": "substitution",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "messageManager: messageManager,"
      ],
      "ecosia_code": [
        "                                            onboardingModel: onboardingModel)",
        "        trackForMemoryLeaks(subject, file: file, line: line)",
        "        return subject"
      ],
      "context_before": [
        "        let subject = LaunchScreenViewModel(windowUUID: windowUUID,",
        "                                            profile: profile,"
      ],
      "context_after": [
        "    }",
        "    /* Ecosia: Remove MockGleanPlumbMessageManagerProtocol ref"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/LaunchView/LaunchScreenViewModelTests.swift",
      "line": 125,
      "type": "removal",
      "comment": "Remove MockGleanPlumbMessageManagerProtocol ref",
      "firefox_code": [
        "    private func createMessage(",
        "        for surface: MessageSurfaceId = .survey,",
        "        action: String = \"OPEN_NEW_TAB\"",
        "    ) -> GleanPlumbMessage {",
        "        let metadata = GleanPlumbMessageMetaData(id: \"\",",
        "                                                 impressions: 0,",
        "                                                 dismissals: 0,",
        "                                                 isExpired: false)",
        "        return GleanPlumbMessage(id: \"test-notification\",",
        "                                 data: MockNotificationMessageDataProtocol(surface: surface),",
        "                                 action: action,",
        "                                 triggerIfAll: [],",
        "                                 exceptIfAny: [],",
        "                                 style: MockStyleDataProtocol(),",
        "                                 metadata: metadata)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "        return subject",
        "    }"
      ],
      "context_after": [
        "",
        "    func createOnboardingViewModel() -> OnboardingViewModel {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 28,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://open-url?url=http%3A%2F%2Fgoogle.com%3Fa%3D1%26b%3D2%26c%3Dfoo%2520bar\")!"
      ],
      "context_before": [
        "        let subject = createSubject()",
        ""
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 39,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://open-url?private=true\")!"
      ],
      "context_before": [
        "    func testSearchRouteWithPrivateFlag() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 50,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/clear-private-data\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithClearPrivateData() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 61,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/newTab\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithNewTab() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 72,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/newTab/\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithNewTabTrailingSlash() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 83,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/homePage\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithHomePage() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 94,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/mailto\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithMailto() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 105,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/search\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithSearch() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 116,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/settings/fxa\")!"
      ],
      "context_before": [
        "    func testSettingsRouteWithFxa() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 127,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/homepanel/bookmarks\")!"
      ],
      "context_before": [
        "    func testHomepanelRouteWithBookmarks() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 138,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/homepanel/top-sites\")!"
      ],
      "context_before": [
        "    func testHomepanelRouteWithTopSites() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 149,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/homepanel/history\")!"
      ],
      "context_before": [
        "    func testHomepanelRouteWithHistory() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 160,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/homepanel/reading-list\")!"
      ],
      "context_before": [
        "    func testHomepanelRouteWithReadingList() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 171,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/default-browser/tutorial\")!"
      ],
      "context_before": [
        "    func testDefaultBrowserRouteWithTutorial() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 182,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/default-browser/system-settings\")!"
      ],
      "context_before": [
        "    func testDefaultBrowserRouteWithSystemSettings() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 193,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/homepanel/badbad\")!"
      ],
      "context_before": [
        "    func testInvalidRouteWithBadPath() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 204,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://fxa-signin?signin=coolcodes&user=foo&email=bar\")!"
      ],
      "context_before": [
        "    func testFxaSignInrouteBuilderRoute() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 253,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-links-are-fun?url=/settings/newTab/\")!"
      ],
      "context_before": [
        "    func testInvalidDeepLink() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 264,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-medium-topsites-open-url?url=https://google.com\")!"
      ],
      "context_before": [
        "    func testWidgetMediumTopSitesOpenUrl() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 275,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-small-quicklink-open-url?private=true&url=https://google.com\")!"
      ],
      "context_before": [
        "    func testWidgetSmallQuicklinkOpenUrlWithPrivateFlag() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 289,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-medium-quicklink-open-url?url=https://google.com\")!"
      ],
      "context_before": [
        "    func testWidgetMediumQuicklinkOpenUrlWithoutPrivateFlag() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 304,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-small-quicklink-open-copied\")!"
      ],
      "context_before": [
        "        let subject = createSubject()",
        "        UIPasteboard.general.string = \"test search text\""
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 316,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-small-quicklink-open-copied\")!"
      ],
      "context_before": [
        "        let subject = createSubject()",
        "        UIPasteboard.general.url = URL(string: \"https://google.com\")"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 327,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-small-quicklink-close-private-tabs\")!"
      ],
      "context_before": [
        "    func testWidgetSmallQuicklinkClosePrivateTabs() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 338,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-medium-quicklink-close-private-tabs\")!"
      ],
      "context_before": [
        "    func testWidgetMediumQuicklinkClosePrivateTabs() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 376,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://widget-tabs-medium-open-url?uuid=invalid\")!"
      ],
      "context_before": [
        "    func testInvalidWidgetTabUuid() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 396,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://open-text?text=google\")!"
      ],
      "context_before": [
        "    func testOpenText() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/RouteTests.swift",
      "line": 409,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let url = URL(string: \"firefox://open-url?private=true\")!"
      ],
      "ecosia_code": [
        "        let url = URL(string: \"ecosia://deep-link?url=/action/show-intro-onboarding\")!"
      ],
      "context_before": [
        "    func testAppAction_showIntroOnboarding() {",
        "        let subject = createSubject()"
      ],
      "context_after": [
        "",
        "        let route = subject.makeRoute(url: url)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SceneCoordinatorTests.swift",
      "line": 52,
      "type": "removal",
      "comment": "Disable Onboarding dependant tests since LaunchCoordinator.presentIntroOnboarding is temporarily disabled",
      "firefox_code": [
        "    func testLaunchWithLaunchType_launchFromScene() {",
        "        let subject = createSubject()",
        "        subject.launchWith(launchType: .intro(manager: IntroScreenManager(prefs: MockProfile().prefs)))",
        "        XCTAssertEqual(subject.childCoordinators.count, 1)",
        "        XCTAssertNotNil(subject.childCoordinators[0] as? LaunchCoordinator)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "    func testLaunchWithLaunchType_launchFromBrowser() {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SceneCoordinatorTests.swift",
      "line": 79,
      "type": "removal",
      "comment": "Disable Onboarding dependant tests since LaunchCoordinator.presentIntroOnboarding is temporarily disabled",
      "firefox_code": [
        "    func testChildLaunchCoordinatorIsDone_startsBrowser() throws {",
        "        let subject = createSubject()",
        "        subject.launchWith(launchType: .intro(manager: IntroScreenManager(prefs: MockProfile().prefs)))",
        "        let childLaunchCoordinator = try XCTUnwrap(subject.childCoordinators[0] as? LaunchCoordinator)",
        "        subject.didFinishLaunch(from: childLaunchCoordinator)",
        "        XCTAssertEqual(subject.childCoordinators.count, 1)",
        "        XCTAssertNotNil(subject.childCoordinators[0] as? BrowserCoordinator)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "    func testHandleRoute_launchNotFinished_routeSaved() {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SceneCoordinatorTests.swift",
      "line": 130,
      "type": "removal",
      "comment": "flanky test, commenting in this version",
      "firefox_code": [
        "    func testHandleShowOnboarding_returnsTrueAndShowsOnboarding() {",
        "        let subject = createSubject()",
        "        let result = testCanHandleAndHandle(subject, route: .action(action: .showIntroOnboarding))",
        "        XCTAssertTrue(result)",
        "        XCTAssertEqual(subject.childCoordinators.count, 1)",
        "        XCTAssertNotNil(subject.childCoordinators[0] as? LaunchCoordinator)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    // MARK: - Handle route",
        ""
      ],
      "context_after": [
        "",
        "    // MARK: - Helpers"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SettingsCoordinatorTests.swift",
      "line": 66,
      "type": "substitution",
      "comment": "Update tests",
      "firefox_code": [
        "XCTAssertTrue(mockRouter.pushedViewController is HomePageSettingViewController)"
      ],
      "ecosia_code": [
        "        XCTAssertTrue(mockRouter.pushedViewController is NTPCustomizationSettingsViewController)"
      ],
      "context_before": [
        "",
        "        XCTAssertEqual(mockRouter.pushCalled, 1)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/SettingsCoordinatorTests.swift",
      "line": 329,
      "type": "substitution",
      "comment": "Update tests",
      "firefox_code": [
        "XCTAssertTrue(mockRouter.pushedViewController is HomePageSettingViewController)"
      ],
      "ecosia_code": [
        "        XCTAssertTrue(mockRouter.pushedViewController is NTPCustomizationSettingsViewController)"
      ],
      "context_before": [
        "",
        "        XCTAssertEqual(mockRouter.pushCalled, 1)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 55,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://open-url?url=https://example.com/path\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://open-url?url=https://example.com/path\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)!",
        "        XCTAssertEqual(scanner.value(query: \"url\"), \"https://example.com/path\")",
        "        XCTAssertEqual(scanner.fullURLQueryItem(), \"https://example.com/path\")"
      ],
      "context_before": [
        "",
        "    func testSimpleFullURLQueryItem() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 65,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://open-url?arg1=abc&url=https://example.com/path?arg1=a\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://open-url?arg1=abc&url=https://example.com/path?arg1=a\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)!",
        "        XCTAssertEqual(scanner.value(query: \"url\"), \"https://example.com/path?arg1=a\")",
        "        XCTAssertEqual(scanner.value(query: \"arg1\"), \"abc\")",
        "        XCTAssertEqual(scanner.fullURLQueryItem(), \"https://example.com/path?arg1=a\")"
      ],
      "context_before": [
        "",
        "    func testPrecedingNonURLParamBeforeURLQueryItem() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 76,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://open-url?url=https://example.com/path?arg1=a\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://open-url?url=https://example.com/path?arg1=a\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)!",
        "        XCTAssertEqual(scanner.value(query: \"url\"), \"https://example.com/path?arg1=a\")",
        "        XCTAssertEqual(scanner.fullURLQueryItem(), \"https://example.com/path?arg1=a\")"
      ],
      "context_before": [
        "",
        "    func testSingleQueryFullURLQueryItem() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 86,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://open-url?url=https://example.com/path?arg1=a&arg2=b\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://open-url?url=https://example.com/path?arg1=a&arg2=b\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)!"
      ],
      "context_before": [
        "",
        "    func testTwoQueryParams() {"
      ],
      "context_after": [
        "        // Currently we do _not_ expect URLComponents to include all parameters to the URL.",
        "        XCTAssertEqual(scanner.value(query: \"url\"), \"https://example.com/path?arg1=a\")"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 99,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://open-url?url=https://example.com/path?arg1=a&arg2=b&arg3=c\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://open-url?url=https://example.com/path?arg1=a&arg2=b&arg3=c\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)!",
        "        XCTAssertEqual(scanner.value(query: \"url\"), \"https://example.com/path?arg1=a\")",
        "        XCTAssertEqual(scanner.fullURLQueryItem(), \"https://example.com/path?arg1=a&arg2=b&arg3=c\")",
        "        XCTAssertEqual(scanner.fullURLQueryItem()?.asURL, URL(string: \"https://example.com/path?arg1=a&arg2=b&arg3=c\"))"
      ],
      "context_before": [
        "",
        "    func testMultipleQueryParams() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 110,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://open-url?url=https://example.com/path?arg1=a&anotherURL=https://test.com\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://open-url?url=https://example.com/path?arg1=a&anotherURL=https://test.com\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)!",
        "        XCTAssertEqual(scanner.fullURLQueryItem(), \"https://example.com/path?arg1=a&anotherURL=https://test.com\")"
      ],
      "context_before": [
        "",
        "    func testMultipleLevelsOfNestedURLs() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Coordinators/URLScannerTests.swift",
      "line": 128,
      "type": "substitution",
      "comment": "Update url",
      "firefox_code": [
        "let urlString = \"firefox://abcdefg/path/to/resource\""
      ],
      "ecosia_code": [
        "        let urlString = \"ecosia://abcdefg/path/to/resource\"",
        "        let url = URL(string: urlString)!",
        "        let scanner = URLScanner(url: url)",
        "        XCTAssertNotNil(scanner)",
        "        XCTAssertTrue(scanner!.isOurScheme)"
      ],
      "context_before": [
        "",
        "    func testOurScheme() {"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/DefaultSearchPrefsTests.swift",
      "line": 19,
      "type": "addition",
      "comment": "update values to include ecosia",
      "firefox_code": [],
      "ecosia_code": [
        "        let usa = (",
        "            lang: [\"en-US\", \"en\"],",
        "            region: \"US\",",
        "            resultList: [\"google-b-1-m\", \"bing\", \"ddg\", \"wikipedia\", \"ecosia\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let england = (",
        "            lang: [\"en-GB\", \"en\"],",
        "            region: \"GB\",",
        "            resultList: [\"google-b-m\", \"bing\", \"ddg\", \"wikipedia\", \"ecosia\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let france = (",
        "            lang: [\"fr-FR\", \"fr\"],",
        "            region: \"FR\",",
        "            resultList: [\"google-b-m\", \"bing\", \"ddg\", \"wikipedia-fr\", \"ecosia\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let japan = (",
        "            lang: [\"ja-JP\", \"ja\"],",
        "            region: \"JP\",",
        "            resultList: [\"google-b-m\", \"bing\", \"wikipedia-ja\", \"ecosia\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let canada = (",
        "            lang: [\"en-CA\", \"en\"],",
        "            region: \"CA\",",
        "            resultList: [\"ecosia\", \"wikipedia\", \"google-b-m\", \"bing\", \"ddg\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let russia = (",
        "            lang: [\"ru-RU\", \"ru\"],",
        "            region: \"RU\",",
        "            resultList: [\"google-com-nocodes\", \"wikipedia-ru\", \"ecosia\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let taiwan = (",
        "            lang: [\"zh-TW\", \"zh\"],",
        "            region: \"TW\",",
        "            resultList: [\"google-b-m\", \"bing\", \"ddg\", \"wikipedia-zh-TW\", \"ecosia\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let china = (",
        "            lang: [\"zh-hans-CN\", \"zh-CN\", \"zh\"],",
        "            region: \"CN\",",
        "            resultList: [\"google-b-m\", \"bing\", \"wikipedia-zh-CN\", \"ecosia\"],",
        "            resultDefault: \"\"",
        "        )",
        "        let germany = (",
        "            lang: [\"de-DE\", \"de\"],",
        "            region: \"DE\",",
        "            resultList: [\"google-b-m\", \"bing\", \"ddg\", \"ecosia\", \"wikipedia-de\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let southAfrica = (",
        "            lang: [\"en-SA\", \"en\"],",
        "            region: \"SA\",",
        "            resultList: [\"ecosia\", \"wikipedia\", \"google-b-m\", \"bing\", \"ddg\"],",
        "            resultDefault: \"ecosia\"",
        "        )",
        "        let testLocales = [",
        "            usa,",
        "            england,",
        "            france,",
        "            japan,",
        "            canada,",
        "            russia,",
        "            taiwan,",
        "            china,",
        "            germany,",
        "            southAfrica",
        "        ]"
      ],
      "context_before": [
        "",
        "        // setup the most popular locales"
      ],
      "context_after": [
        "",
        "        // run tests"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/DependencyInjection/DependencyHelperMock.swift",
      "line": 15,
      "type": "addition",
      "comment": "Make themeManager injectable",
      "firefox_code": [],
      "ecosia_code": [
        "    ) {",
        "        AppContainer.shared.reset()"
      ],
      "context_before": [
        "        injectedTabManager: TabManager? = nil,",
        "        injectedMicrosurveyManager: MicrosurveyManager? = nil,"
      ],
      "context_after": [
        "",
        "        let profile: Client.Profile = BrowserProfile("
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/DependencyInjection/DependencyHelperMock.swift",
      "line": 39,
      "type": "substitution",
      "comment": "Remove themeManager constant",
      "firefox_code": [
        "let themeManager: ThemeManager = MockThemeManager()"
      ],
      "ecosia_code": [
        "        AppContainer.shared.register(service: themeManager)"
      ],
      "context_before": [
        "        let appSessionProvider: AppSessionProvider = AppSessionManager()",
        "        AppContainer.shared.register(service: appSessionProvider)"
      ],
      "context_after": [
        "",
        "        let ratingPromptManager = RatingPromptManager(profile: profile)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/SearchEngines/SearchTests.swift",
      "line": 12,
      "type": "removal",
      "comment": "Replace Google tests with Ecosia's",
      "firefox_code": [
        "    func testParsing() {",
        "        let parser = OpenSearchParser(pluginMode: true)",
        "        let file = Bundle.main.path(forResource: \"google-b-m\", ofType: \"xml\", inDirectory: \"SearchPlugins/\")",
        "        let engine: OpenSearchEngine! = parser.parse(file!, engineID: \"google-b-m\")",
        "        XCTAssertEqual(engine.shortName, \"Google\")",
        "        // Test regular search queries.",
        "        XCTAssertEqual(engine.searchURLForQuery(\"foobar\")!.absoluteString,",
        "                       \"https://www.google.com/search?q=foobar&ie=utf-8&oe=utf-8&client=firefox-b-m\")",
        "        // Test search suggestion queries.",
        "        XCTAssertEqual(engine.suggestURLForQuery(\"foobar\")!.absoluteString,",
        "                       \"https://www.google.com/complete/search?client=firefox&q=foobar\")",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "class SearchTests: XCTestCase {"
      ],
      "context_after": [
        "    func testParsing() {",
        "        let parser = OpenSearchParser(pluginMode: true)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 69,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 5, \"Contains 5 default sites\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 0, \"Contains no default sites\")",
        "            expectation.fulfill()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 88,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 7, \"Contains 5 default sites and two pinned sites\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 2, \"Contains no default sites and two pinned sites\")",
        "            expectation.fulfill()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 110,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 7, \"Contains 5 default sites and 2 frecency sites\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 2, \"Contains no default sites and 2 frecency sites\")",
        "            expectation.fulfill()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 131,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 7, \"Contains 5 default sites and 2 frecency sites, no sponsored urls\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 2, \"Contains no default sites and 2 frecency sites, no sponsored urls\")",
        "            expectation.fulfill()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 152,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 7, \"Contains 5 default sites and 2 frecency sites, no frecency duplicates\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 2, \"Contains no default sites and 2 frecency sites, no frecency duplicates\")",
        "            expectation.fulfill()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 172,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 5, \"Contains only 5 default sites, no duplicates of defaults sites\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 1, \"Contains only no default sites, no duplicates of defaults sites\")",
        "            expectation.fulfill()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Browser/TopSitesHelperTests.swift",
      "line": 197,
      "type": "removal",
      "comment": "Update with removed default sites",
      "firefox_code": [
        "            XCTAssertEqual(sites.count, 5, \"Contains only 4 default sites, and \" + \"one pinned site that replaced the default site\")"
      ],
      "ecosia_code": [],
      "context_before": [
        "                return",
        "            }"
      ],
      "context_after": [
        "            XCTAssertEqual(sites.count, 1, \"Contains no default sites, and \"",
        "                           + \"one pinned site that replaced the default site\")"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/ContentContainerTests.swift",
      "line": 252,
      "type": "removal",
      "comment": "Update HomepageViewController init",
      "firefox_code": [
        "        return LegacyHomepageViewController(",
        "            profile: profile,",
        "            toastContainer: UIView(),",
        "            tabManager: MockTabManager(),",
        "            overlayManager: overlayModeManager",
        "        )"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "    private func createHomepage() -> LegacyHomepageViewController {"
      ],
      "context_after": [
        "        return LegacyHomepageViewController(",
        "            profile: profile,"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/HomepageViewControllerTests.swift",
      "line": 32,
      "type": "removal",
      "comment": "update HomepageViewController's init",
      "firefox_code": [
        "        let firefoxHomeViewController = HomepageViewController(profile: profile,",
        "                                                               toastContainer: UIView(),",
        "                                                               tabManager: tabManager,",
        "                                                               overlayManager: overlayManager)"
      ],
      "ecosia_code": [],
      "context_before": [
        "        overlayManager.setURLBar(urlBarView: urlBar)",
        ""
      ],
      "context_after": [
        "        let firefoxHomeViewController = HomepageViewController(profile: profile,",
        "                                                               toastContainer: UIView(),"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/LegacyHomepageViewControllerTests.swift",
      "line": 34,
      "type": "removal",
      "comment": "Update HomepageViewController's init",
      "firefox_code": [
        "         let firefoxHomeViewController = LegacyHomepageViewController(",
        "             profile: profile,",
        "             toastContainer: UIView(),",
        "             tabManager: tabManager,",
        "             overlayManager: overlayManager",
        "         )"
      ],
      "ecosia_code": [],
      "context_before": [
        "        overlayManager.setURLBar(urlBarView: urlBar)",
        ""
      ],
      "context_after": [
        "        let firefoxHomeViewController = LegacyHomepageViewController(",
        "            profile: profile,"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/LegacyHomepageViewControllerTests.swift",
      "line": 63,
      "type": "removal",
      "comment": "Update HomepageViewController's init",
      "firefox_code": [
        "         let subject = LegacyHomepageViewController(",
        "             profile: profile,",
        "             toastContainer: UIView(),",
        "             tabManager: tabManager,",
        "             overlayManager: overlayManager",
        "         )"
      ],
      "ecosia_code": [],
      "context_before": [
        "        overlayManager.setURLBar(urlBarView: urlBar)",
        ""
      ],
      "context_after": [
        "        let subject = LegacyHomepageViewController(",
        "            profile: profile,"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesDimensionTests.swift",
      "line": 40,
      "type": "substitution",
      "comment": "update number of items",
      "firefox_code": [
        "XCTAssertEqual(dimension.numberOfTilesPerRow, 8)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(dimension.numberOfTilesPerRow, 4)"
      ],
      "context_before": [
        "        let dimension = subject.getSectionDimension(for: createSites(), numberOfRows: 2, interface: interface)",
        "        XCTAssertEqual(dimension.numberOfRows, 2)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesDimensionTests.swift",
      "line": 55,
      "type": "substitution",
      "comment": "update number of items",
      "firefox_code": [
        "XCTAssertEqual(dimension.numberOfTilesPerRow, 7)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(dimension.numberOfTilesPerRow, 4)"
      ],
      "context_before": [
        "        let dimension = subject.getSectionDimension(for: createSites(), numberOfRows: 2, interface: interface)",
        "        XCTAssertEqual(dimension.numberOfRows, 2)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesDimensionTests.swift",
      "line": 70,
      "type": "substitution",
      "comment": "update number of items",
      "firefox_code": [
        "XCTAssertEqual(dimension.numberOfTilesPerRow, 10)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(dimension.numberOfTilesPerRow, 4)"
      ],
      "context_before": [
        "        let dimension = subject.getSectionDimension(for: createSites(), numberOfRows: 2, interface: interface)",
        "        XCTAssertEqual(dimension.numberOfRows, 2)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesDimensionTests.swift",
      "line": 111,
      "type": "substitution",
      "comment": "update number of items",
      "firefox_code": [
        "XCTAssertEqual(dimension.numberOfTilesPerRow, 7)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(dimension.numberOfTilesPerRow, 4)"
      ],
      "context_before": [
        "        let dimension = subject.getSectionDimension(for: createSites(), numberOfRows: 2, interface: interface)",
        "        XCTAssertEqual(dimension.numberOfRows, 2)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesDimensionTests.swift",
      "line": 126,
      "type": "substitution",
      "comment": "udpate number of items",
      "firefox_code": [
        "XCTAssertEqual(dimension.numberOfTilesPerRow, 11)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(dimension.numberOfTilesPerRow, 4)"
      ],
      "context_before": [
        "        let dimension = subject.getSectionDimension(for: createSites(), numberOfRows: 2, interface: interface)",
        "        XCTAssertEqual(dimension.numberOfRows, 2)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Frontend/Home/TopSites/TopSitesViewModelTests.swift",
      "line": 28,
      "type": "removal",
      "comment": "Remove default sites dependant tests since DefaultSuggestedSites.defaultSites is empty",
      "firefox_code": [
        "    func testDeletionOfSingleSuggestedSite() {",
        "        let viewModel = TopSitesViewModel(profile: profile,",
        "                                          isZeroSearch: false,",
        "                                          theme: LightTheme(),",
        "                                          wallpaperManager: WallpaperManager())",
        "        let topSitesProvider = TopSitesProviderImplementation(placesFetcher: profile.places,",
        "                                                              pinnedSiteFetcher: profile.pinnedSites,",
        "                                                              prefs: profile.prefs)",
        "        let siteToDelete = topSitesProvider.defaultTopSites(profile.prefs)[0]",
        "        viewModel.hideURLFromTopSites(siteToDelete)",
        "        let newSites = topSitesProvider.defaultTopSites(profile.prefs)",
        "        XCTAssertFalse(newSites.contains(siteToDelete, f: { (first, second) -> Bool in",
        "            return first.url == second.url",
        "        }))",
        "    }",
        "    func testDeletionOfAllDefaultSites() {",
        "        let viewModel = TopSitesViewModel(profile: self.profile,",
        "                                          isZeroSearch: false,",
        "                                          theme: LightTheme(),",
        "                                          wallpaperManager: WallpaperManager())",
        "        let topSitesProvider = TopSitesProviderImplementation(placesFetcher: profile.places,",
        "                                                              pinnedSiteFetcher: profile.pinnedSites,",
        "                                                              prefs: profile.prefs)",
        "        let defaultSites = topSitesProvider.defaultTopSites(profile.prefs)",
        "        defaultSites.forEach({",
        "            viewModel.hideURLFromTopSites($0)",
        "        })",
        "        let newSites = topSitesProvider.defaultTopSites(profile.prefs)",
        "        XCTAssertTrue(newSites.isEmpty)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "}",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Helpers/IntroScreenManagerTests.swift",
      "line": 23,
      "type": "removal",
      "comment": "we are basing the onboarding/intro on different flags",
      "firefox_code": [
        "    func testHasntSeenIntroScreenYet_shouldShowIt() {",
        "        let subject = IntroScreenManager(prefs: prefs)",
        "        XCTAssertTrue(subject.shouldShowIntroScreen)",
        "    }",
        "    func testHasSeenIntroScreen_shouldNotShowIt() {",
        "        let subject = IntroScreenManager(prefs: prefs)",
        "        subject.didSeeIntroScreen()",
        "        XCTAssertFalse(subject.shouldShowIntroScreen)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "}"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Library/Bookmarks/BookmarkPanelViewModelTests.swift",
      "line": 59,
      "type": "removal",
      "comment": "Temporarily remove that due to a bookmark inconsistency",
      "firefox_code": [
        "    func testShouldReload_whenMobileEmptyBookmarks() throws {",
        "        profile.reopen()",
        "        let subject = createSubject(guid: BookmarkRoots.MobileFolderGUID)",
        "        let expectation = expectation(description: \"Subject reloaded\")",
        "        subject.reloadData {",
        "            XCTAssertNotNil(subject.bookmarkFolder)",
        "            XCTAssertEqual(subject.bookmarkNodes.count, 1, \"Contains the local desktop folder\")",
        "            expectation.fulfill()",
        "        }",
        "        waitForExpectations(timeout: 5)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "    func testShouldReload_whenLocalDesktopFolder() {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Mocks/MockSettingsDelegate.swift",
      "line": 10,
      "type": "addition",
      "comment": "meet new conformance for SettingsDelegate",
      "firefox_code": [],
      "ecosia_code": [
        "    func reloadHomepage() {}",
        "    func settingsOpenURLInNewTab(_ url: URL) { }",
        "    func didFinish() {}"
      ],
      "context_before": [
        "",
        "class MockSettingsDelegate: SettingsDelegate {"
      ],
      "context_after": [
        "}"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Mocks/MockTabManager.swift",
      "line": 51,
      "type": "removal",
      "comment": "Allow overriding subscript",
      "firefox_code": [
        "    subscript(webView: WKWebView) -> Tab? {",
        "        return nil",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "    var subscriptedTab: Tab?",
        "    subscript(webView: WKWebView) -> Tab? {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/OnboardingTests/NimbusOnboardingFeatureLayerTests.swift",
      "line": 30,
      "type": "substitution",
      "comment": "Update placeholder",
      "firefox_code": [
        "let expectedPlaceholderString = \"A string inside Firefox with a placeholder\""
      ],
      "ecosia_code": [
        "        let expectedPlaceholderString = \"A string inside Ecosia with a placeholder\"",
        "        let expectedNoPlaceholderString = \"On Wednesday's, we wear pink\"",
        "        let layer = NimbusOnboardingFeatureLayer(with: MockNimbusMessagingHelperUtility())"
      ],
      "context_before": [
        "    func testLayer_placeholderNamingMethod_returnsExpectedStrigs() {",
        "        setupNimbusForStringTesting()"
      ],
      "context_after": [
        "",
        "        guard let subject = layer.getOnboardingModel(for: .freshInstall).cards.first else {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/OverlayModeManagerTests.swift",
      "line": 32,
      "type": "substitution",
      "comment": "Update test name according to the expected behaviour",
      "firefox_code": [
        "func testEnterOverlayMode_ForNewTabHome_WithNilURL() {"
      ],
      "ecosia_code": [
        "    func testDoesNotEnterOverlayMode_ForNewTabHome_WithNilURL() {",
        "        subject.setURLBar(urlBarView: urlBar)",
        "        subject.openNewTab(url: nil, newTabSettings: .topSites)"
      ],
      "context_before": [
        "",
        "    // MARK: - Test EnterOverlay for New tab"
      ],
      "context_after": [
        "        // Ecosia: Update with the new Ecosia's behaviour where overlay mode is OFF for New Tab",
        "        // XCTAssertTrue(subject.inOverlayMode)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/OverlayModeManagerTests.swift",
      "line": 37,
      "type": "substitution",
      "comment": "Update with the new Ecosia's behaviour where overlay mode is OFF for New Tab",
      "firefox_code": [
        "XCTAssertTrue(subject.inOverlayMode)"
      ],
      "ecosia_code": [
        "        XCTAssertFalse(subject.inOverlayMode)",
        "        XCTAssertEqual(subject.enterOverlayModeCallCount, 1)"
      ],
      "context_before": [
        "        subject.setURLBar(urlBarView: urlBar)",
        "        subject.openNewTab(url: nil, newTabSettings: .topSites)"
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/OverlayModeManagerTests.swift",
      "line": 43,
      "type": "substitution",
      "comment": "Update test name according to the expected behaviour",
      "firefox_code": [
        "func testEnterOverlayMode_ForNewTabHome_WithHomeURL() {"
      ],
      "ecosia_code": [
        "    func testDoesNotEnterOverlayMode_ForNewTabHome_WithHomeURL() {",
        "        subject.setURLBar(urlBarView: urlBar)",
        "        subject.openNewTab(url: URL(string: \"internal://local/about/home\"),",
        "                           newTabSettings: .topSites)"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "        // Ecosia: Update with the new Ecosia's behaviour where overlay mode is OFF for New Tab"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/OverlayModeManagerTests.swift",
      "line": 50,
      "type": "substitution",
      "comment": "Update with the new Ecosia's behaviour where overlay mode is OFF for New Tab",
      "firefox_code": [
        "XCTAssertTrue(subject.inOverlayMode)"
      ],
      "ecosia_code": [
        "        XCTAssertFalse(subject.inOverlayMode)",
        "        XCTAssertEqual(subject.enterOverlayModeCallCount, 1)"
      ],
      "context_before": [
        "                           newTabSettings: .topSites)",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/ProfileTest.swift",
      "line": 6,
      "type": "substitution",
      "comment": "Remove Account import",
      "firefox_code": [
        "@testable import Account"
      ],
      "ecosia_code": [
        "import Foundation",
        "import Shared",
        "import Storage"
      ],
      "context_before": [
        "",
        "@testable import Client"
      ],
      "context_after": [
        "",
        "import XCTest"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Settings/AppSettingsTableViewControllerTests.swift",
      "line": 107,
      "type": "removal",
      "comment": "Update deeplink",
      "firefox_code": [
        "        XCTAssertEqual(applicationHelper.lastOpenURL,",
        "                       URL(string: \"fennec://deep-link?url=/action/show-intro-onboarding\")!)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        XCTAssertEqual(delegate.didFinishShowingSettingsCalled, 1)"
      ],
      "context_after": [
        "        XCTAssertEqual(applicationHelper.lastOpenURL,",
        "                       URL(string: \"ecosia://deep-link?url=/action/show-intro-onboarding\")!)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Settings/VersionSettingTests.swift",
      "line": 7,
      "type": "substitution",
      "comment": "Remove Shared as we import Client",
      "firefox_code": [
        "import Shared"
      ],
      "ecosia_code": [
        "import Common"
      ],
      "context_before": [
        "import XCTest",
        "@testable import Client"
      ],
      "context_after": [
        "",
        "class VersionSettingTests: XCTestCase {"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Settings/VersionSettingTests.swift",
      "line": 42,
      "type": "removal",
      "comment": "Update appversion predicate",
      "firefox_code": [
        "        let appVersionPredicate = (appVersionString?.contains(\"Firefox\") ?? false) == true"
      ],
      "ecosia_code": [],
      "context_before": [
        "        // Then",
        "        let appVersionString = UIPasteboard.general.string"
      ],
      "context_after": [
        "        let appVersionPredicate = (appVersionString?.contains(\"Ecosia\") ?? false) == true",
        "        XCTAssertNotNil(appVersionString, \"App version not copied\")"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 37,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "        XCTAssertFalse(subject.hasTopTabs)",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 50,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 63,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 80,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(0).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 97,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 110,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 123,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 140,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 157,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer1.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 170,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer3.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 188,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer3.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 202,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer3.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/StatusBarOverlayTests.swift",
      "line": 220,
      "type": "removal",
      "comment": "Update expected background color",
      "firefox_code": [
        "        XCTAssertEqual(backgroundColor.cgColor, LightTheme().colors.layer3.withAlphaComponent(1).cgColor)"
      ],
      "ecosia_code": [],
      "context_before": [
        "",
        "        let backgroundColor = try XCTUnwrap(subject.backgroundColor)"
      ],
      "context_after": [
        "        XCTAssertEqual(backgroundColor.cgColor, theme.colors.ecosia.backgroundPrimary.withAlphaComponent(1).cgColor)",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 99,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testPreserveTabsWithNoTabs() async throws {",
        "        let subject = createSubject()",
        "        subject.preserveTabs()",
        "        try await Task.sleep(nanoseconds: sleepTime)",
        "        XCTAssertEqual(mockTabStore.saveWindowDataCalledCount, 0)",
        "        XCTAssertEqual(subject.tabs.count, 0)"
      ],
      "context_before": [
        "    // MARK: - Save tabs",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 109,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testPreserveTabsWithOneTab() async throws {",
        "        let subject = createSubject()",
        "        subject.tabRestoreHasFinished = true",
        "        addTabs(to: subject, count: 1)",
        "        subject.preserveTabs()",
        "        try await Task.sleep(nanoseconds: sleepTime)",
        "        XCTAssertEqual(mockTabStore.saveWindowDataCalledCount, 1)",
        "        XCTAssertEqual(subject.tabs.count, 1)"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 121,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testPreserveTabsWithManyTabs() async throws {",
        "        let subject = createSubject()",
        "        subject.tabRestoreHasFinished = true",
        "        addTabs(to: subject, count: 5)",
        "        subject.preserveTabs()",
        "        try await Task.sleep(nanoseconds: sleepTime)",
        "        XCTAssertEqual(mockTabStore.saveWindowDataCalledCount, 1)",
        "        XCTAssertEqual(subject.tabs.count, 5)"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "    }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 134,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testSaveScreenshotWithNoImage() async throws {",
        "        let subject = createSubject()",
        "        addTabs(to: subject, count: 5)",
        "        guard let tab = subject.tabs.first else {",
        "            XCTFail(\"First tab was expected to be found\")",
        "            return"
      ],
      "context_before": [
        "",
        "    // MARK: - Save preview screenshot"
      ],
      "context_after": [
        "        }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 149,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testSaveScreenshotWithImage() async throws {",
        "        let subject = createSubject()",
        "        addTabs(to: subject, count: 5)",
        "        guard let tab = subject.tabs.first else {",
        "            XCTFail(\"First tab was expected to be found\")",
        "            return"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        }",
        "        tab.setScreenshot(UIImage())"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 164,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testRemoveScreenshotWithImage() async throws {",
        "        let subject = createSubject()",
        "        addTabs(to: subject, count: 5)",
        "        guard let tab = subject.tabs.first else {",
        "            XCTFail(\"First tab was expected to be found\")",
        "            return"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 180,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testGetActiveAndInactiveTabs() {",
        "        let totalTabCount = 3",
        "        let subject = createSubject()",
        "        addTabs(to: subject, count: totalTabCount)"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "        // Preconditions"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 204,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func test_addTabsForURLs() {",
        "        let subject = createSubject()"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "        subject.addTabsForURLs([URL(string: \"https://www.mozilla.org/privacy/firefox\")!], zombie: false, shouldSelectTab: false)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 216,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func test_addTabsForURLs_forPrivateMode() {",
        "        let subject = createSubject()"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "",
        "        subject.addTabsForURLs([URL(string: \"https://www.mozilla.org/privacy/firefox\")!], zombie: false, shouldSelectTab: false, isPrivate: true)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 230,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forEmptyArray() async throws {"
      ],
      "context_before": [
        "    // MARK: - Test findRightOrLeftTab helper",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [] Empty"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 248,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forSingleTabInArray_ofSameType() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 268,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forSingleTabInArray_ofDifferentType() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 287,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forDeletedIndexInMiddle_uniformTabTypes() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1, A2, A3, A4, A5, A6, A7]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 308,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forDeletedIndexInMiddle_mixedTabTypes() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1, P1, P2, I1, A2, I2, A3, A4, P3]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 335,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forDeletedIndexAtStart() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1, P1, P2, I1, A2, I2, A3, A4, P3]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 362,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_forDeletedIndexAtEnd() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1, P1, P2, I1, A2, I2, A3, A4, P3]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabManagement/TabManagerTests.swift",
      "line": 389,
      "type": "addition",
      "comment": "Update test to run on the main threads same as other tests",
      "firefox_code": [],
      "ecosia_code": [
        "    @MainActor",
        "    func testFindRightOrLeftTab_prefersRightTabOverLeftTab() async throws {"
      ],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "        // Set up a tab array as follows:",
        "        // [A1, P1, P2, I1, A2, I2, A3, A4, P3]"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabToolbarHelperTests.swift",
      "line": 18,
      "type": "removal",
      "comment": "update search image",
      "firefox_code": [
        "    let searchButtonImage = UIImage.templateImageNamed(StandardImageIdentifiers.Large.search)"
      ],
      "ecosia_code": [],
      "context_before": [
        "        .imageFlippedForRightToLeftLayoutDirection()",
        "    let menuButtonImage = UIImage.templateImageNamed(StandardImageIdentifiers.Large.appMenu)"
      ],
      "context_after": [
        "    let searchButtonImage = UIImage.templateImageNamed(\"searchUrl\")",
        "    let imageNewTab = UIImage.templateImageNamed(StandardImageIdentifiers.Large.plus)"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabToolbarHelperTests.swift",
      "line": 23,
      "type": "removal",
      "comment": "update home image",
      "firefox_code": [
        "    let imageHome = UIImage.templateImageNamed(StandardImageIdentifiers.Large.home)"
      ],
      "ecosia_code": [],
      "context_before": [
        "    let searchButtonImage = UIImage.templateImageNamed(\"searchUrl\")",
        "    let imageNewTab = UIImage.templateImageNamed(StandardImageIdentifiers.Large.plus)"
      ],
      "context_after": [
        "    let imageHome = UIImage.templateImageNamed(\"menu-Home\")",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabToolbarHelperTests.swift",
      "line": 112,
      "type": "removal",
      "comment": "Change `addNewTabButton` to configurable CircleButton",
      "firefox_code": [
        "    var _addNewTabButton = MockToolbarButton()",
        "    var addNewTabButton: ToolbarButton { return _addNewTabButton }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    var _bookmarksButton = MockToolbarButton()",
        "    var bookmarksButton: ToolbarButton { return _bookmarksButton }"
      ],
      "context_after": [
        "",
        "    var _circleButton: Client.CircleButton = CircleButton()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabTray/TabTrayViewControllerTests.swift",
      "line": 39,
      "type": "substitution",
      "comment": "update items",
      "firefox_code": [
        "XCTAssertEqual(viewController.segmentControlItems.count, 3)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(viewController.segmentControlItems.count, 2)",
        "        guard let navController = viewController.navigationController else {",
        "            XCTFail(\"NavigationController is expected\")",
        "            return"
      ],
      "context_before": [
        "        viewController.viewWillAppear(false)",
        ""
      ],
      "context_after": [
        "        }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/TabTray/TabTrayViewControllerTests.swift",
      "line": 83,
      "type": "substitution",
      "comment": "update items",
      "firefox_code": [
        "XCTAssertEqual(viewController.segmentControlItems.count, 3)"
      ],
      "ecosia_code": [
        "        XCTAssertEqual(viewController.segmentControlItems.count, 2)",
        "        guard let navController = viewController.navigationController else {",
        "            XCTFail(\"NavigationController is expected\")",
        "            return"
      ],
      "context_before": [
        "        viewController.viewWillAppear(false)",
        ""
      ],
      "context_after": [
        "        }",
        ""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/ClientTests/Wallpaper/WallpaperSelectorViewModelTests.swift",
      "line": 56,
      "type": "removal",
      "comment": "remove Glean dependency",
      "firefox_code": [
        "    func testRecordsWallpaperSelectorView() {",
        "        wallpaperManager = WallpaperManager()",
        "        let subject = createSubject()",
        "        subject.sendImpressionTelemetry()",
        "        testEventMetricRecordingSuccess(metric: GleanMetrics.Onboarding.wallpaperSelectorView)",
        "    }",
        "    func testRecordsWallpaperSelectorClose() {",
        "        wallpaperManager = WallpaperManager()",
        "        let subject = createSubject()",
        "        subject.sendDismissImpressionTelemetry()",
        "        testEventMetricRecordingSuccess(metric: GleanMetrics.Onboarding.wallpaperSelectorClose)",
        "    }"
      ],
      "ecosia_code": [],
      "context_before": [
        "    }",
        ""
      ],
      "context_after": [
        "//    func testClickingCell_recordsWallpaperChange() {",
        "//        let subject = createSubject()"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentBuilderTests.swift",
      "line": 45,
      "type": "removal",
      "comment": "Update extensions",
      "firefox_code": [
        "        let extensions = \"FxiOS/\\(AppInfo.appVersion)  \\(UserAgent.uaBitMobile) \\(UserAgent.uaBitSafari)\""
      ],
      "ecosia_code": [],
      "context_before": [
        "        let builder = UserAgentBuilder.defaultMobileUserAgent()",
        "        let systemInfo = \"(\\(UIDevice.current.model); CPU iPhone OS \\(UIDevice.current.systemVersion.replacingOccurrences(of: \".\", with: \"_\")) like Mac OS X)\""
      ],
      "context_after": [
        "        let extensions = \"\\(UserAgent.uaBitVersion) \\(UserAgent.uaBitMobile) \\(UserAgent.uaBitSafari) \\(UserAgent.uaBitEcosia)\"",
        "        let testAgent = \"\\(UserAgent.product) \\(systemInfo) \\(UserAgent.platform) \\(UserAgent.platformDetails) \\(extensions)\""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentBuilderTests.swift",
      "line": 56,
      "type": "removal",
      "comment": "Update extensions",
      "firefox_code": [
        "        let extensions = \"FxiOS/\\(AppInfo.appVersion)  \\(UserAgent.uaBitMobile) \\(UserAgent.uaBitSafari)\""
      ],
      "ecosia_code": [],
      "context_before": [
        "        let builder = UserAgentBuilder.defaultDesktopUserAgent()",
        "        let systemInfo = \"(Macintosh; Intel Mac OS X 10.15)\""
      ],
      "context_after": [
        "        let extensions = \"\\(UserAgent.uaBitVersion) \\(UserAgent.uaBitMobile) \\(UserAgent.uaBitSafari)\"",
        "        let testAgent = \"\\(UserAgent.product) \\(systemInfo) \\(UserAgent.platform) \\(UserAgent.platformDetails) \\(extensions)\""
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentTests.swift",
      "line": 13,
      "type": "addition",
      "comment": "Add not nil check for domain",
      "firefox_code": [],
      "ecosia_code": [
        "            XCTAssertNotNil(domain)",
        "            XCTAssertEqual(agent, UserAgent.getUserAgent(domain: domain, platform: .Desktop))"
      ],
      "context_before": [
        "        let domains = CustomUserAgentConstant.customDesktopUAForDomain",
        "        domains.forEach { domain, agent in"
      ],
      "context_after": [
        "        }",
        "    }"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentTests.swift",
      "line": 28,
      "type": "removal",
      "comment": "Use default Firefox UA instead",
      "firefox_code": [
        "        XCTAssertEqual(UserAgent.mobileUserAgent(),"
      ],
      "ecosia_code": [],
      "context_before": [
        "    func testGetUserAgentDesktop_withPaypalDomain_returnMobileUserAgent() {",
        "        let paypalDomain = \"paypal.com\""
      ],
      "context_after": [
        "        XCTAssertEqual(UserAgentBuilder.defaultFirefoxMobileUserAgent().userAgent(),",
        "                       UserAgent.getUserAgent(domain: paypalDomain, platform: .Desktop))"
      ]
    },
    {
      "file": "firefox-ios/firefox-ios-tests/Tests/SharedTests/UserAgentTests.swift",
      "line": 37,
      "type": "removal",
      "comment": "Use default Firefox UA instead",
      "firefox_code": [
        "        XCTAssertEqual(UserAgent.mobileUserAgent(),"
      ],
      "ecosia_code": [],
      "context_before": [
        "    func testGetUserAgentMobile_withPaypalDomain_returnProperUserAgent() {",
        "        let paypalDomain = \"paypal.com\""
      ],
      "context_after": [
        "        XCTAssertEqual(UserAgentBuilder.defaultFirefoxMobileUserAgent().userAgent(),",
        "                       UserAgent.getUserAgent(domain: paypalDomain, platform: .Mobile))"
      ]
    }
  ]
}